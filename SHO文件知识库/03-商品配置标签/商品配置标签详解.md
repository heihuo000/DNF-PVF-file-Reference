# SHO文件商品配置标签详解

## 概述

商品配置标签是SHO文件的核心部分，定义了商店中销售的具体商品信息。这些标签控制着商品的基本属性、价格、库存、购买限制等重要特性。

## 商品列表结构

商品配置位于 `[sell list]` 标签之后，每个商品都有一套完整的配置标签。

## 基础商品标签

### 1. [item] - 商品物品
**功能**: 指定销售的物品ID
**语法**: `[item]	<物品ID>`
**示例**:
```
[item]	2001	// 销售物品ID为2001的物品
[item]	3050	// 销售物品ID为3050的物品
```
**说明**:
- 必须是有效的物品ID
- 对应equipment或stackable文件中的物品
- 每个商品条目的第一个标签

### 2. [price] - 商品价格
**功能**: 设置商品的销售价格
**语法**: `[price]	<数值>`
**示例**:
```
[price]	1000	// 价格为1000金币
[price]	50000	// 价格为50000金币
```
**说明**:
- 价格单位取决于商店的货币类型
- 0表示免费
- 必须是非负整数

### 3. [stock] - 库存数量
**功能**: 设置商品的库存数量
**语法**: `[stock]	<数值>`
**示例**:
```
[stock]	10	// 库存10个
[stock]	-1	// 无限库存
[stock]	0	// 暂时缺货
```
**说明**:
- -1表示无限库存
- 0表示缺货（不可购买）
- 正整数表示具体库存数量

### 4. [max buy] - 最大购买数量
**功能**: 限制单次购买的最大数量
**语法**: `[max buy]	<数值>`
**示例**:
```
[max buy]	5	// 单次最多购买5个
[max buy]	1	// 单次只能购买1个
[max buy]	0	// 无购买限制
```
**说明**:
- 0表示无限制
- 正整数表示具体限制
- 用于控制稀有物品的获取

## 高级商品标签

### 1. [discount] - 商品折扣
**功能**: 为特定商品设置独立折扣
**语法**: `[discount]	<数值>`
**示例**:
```
[discount]	80	// 该商品8折
[discount]	50	// 该商品5折
[discount]	100	// 该商品无折扣
```
**说明**:
- 数值范围：1-100
- 会覆盖商店全局折扣设置
- 100表示原价

### 2. [level required] - 等级要求
**功能**: 设置购买该商品所需的最低等级
**语法**: `[level required]	<数值>`
**示例**:
```
[level required]	30	// 需要30级以上
[level required]	1	// 1级即可购买
[level required]	0	// 无等级要求
```
**说明**:
- 0表示无等级要求
- 正整数表示具体等级要求
- 用于高级装备的等级限制

### 3. [class required] - 职业要求
**功能**: 限制特定职业才能购买
**语法**: `[class required]	<职业ID>`
**示例**:
```
[class required]	0	// 鬼剑士专用
[class required]	1	// 格斗家专用
[class required]	-1	// 所有职业可用
```
**说明**:
- -1表示所有职业可用
- 具体数值对应特定职业
- 用于职业专属装备

### 4. [gender required] - 性别要求
**功能**: 限制特定性别才能购买
**语法**: `[gender required]	<数值>`
**示例**:
```
[gender required]	0	// 男性专用
[gender required]	1	// 女性专用
[gender required]	-1	// 不限性别
```
**说明**:
- 0: 男性专用
- 1: 女性专用
- -1: 不限性别

### 5. [purchase limit] - 购买限制
**功能**: 设置该商品的总购买限制
**语法**: `[purchase limit]	<数值>`
**示例**:
```
[purchase limit]	1	// 每个角色只能购买1次
[purchase limit]	10	// 每个角色最多购买10次
[purchase limit]	0	// 无购买限制
```
**说明**:
- 0表示无限制
- 正整数表示具体限制次数
- 用于限量商品控制

## 特殊商品标签

### 1. [rare item] - 稀有物品
**功能**: 标记为稀有物品
**语法**: `[rare item]	<布尔值>`
**示例**:
```
[rare item]	1	// 稀有物品
[rare item]	0	// 普通物品
```
**说明**:
- 1: 稀有物品（可能有特殊显示效果）
- 0: 普通物品（默认）

### 2. [event item] - 活动物品
**功能**: 标记为活动期间的特殊物品
**语法**: `[event item]	<布尔值>`
**示例**:
```
[event item]	1	// 活动物品
[event item]	0	// 普通物品
```
**说明**:
- 1: 活动物品
- 0: 普通物品（默认）

### 3. [time limited] - 限时销售
**功能**: 设置商品的销售时间限制
**语法**: `[time limited]	<时间戳>`
**示例**:
```
[time limited]	1640995200	// 2022年1月1日到期
[time limited]	0	// 无时间限制
```
**说明**:
- 0表示无时间限制
- 时间戳表示到期时间
- 过期后自动下架

## 完整商品配置示例

### 普通装备
```
[item]	2001	// 物品ID
[price]	10000	// 价格10000金币
[stock]	-1	// 无限库存
[max buy]	1	// 单次购买1个
[level required]	20	// 需要20级
[class required]	0	// 鬼剑士专用
[gender required]	-1	// 不限性别
```

### 稀有限量物品
```
[item]	5001	// 稀有物品ID
[price]	100000	// 高价格
[stock]	5	// 限量5个
[max buy]	1	// 单次只能买1个
[purchase limit]	1	// 每人只能买1次
[level required]	50	// 需要50级
[discount]	90	// 9折优惠
[rare item]	1	// 标记为稀有
```

### 活动限时物品
```
[item]	8001	// 活动物品ID
[price]	1	// 象征性价格
[stock]	100	// 限量100个
[max buy]	3	// 单次最多3个
[purchase limit]	5	// 每人最多5个
[event item]	1	// 活动物品
[time limited]	1640995200	// 限时销售
```

## 商品列表结束

### [sell list end] - 销售列表结束
**功能**: 标记销售商品列表的结束
**语法**: `[sell list end]`
**示例**:
```
[sell list end]	// 商品列表结束标记
```
**说明**:
- 必须在所有商品配置之后
- 标记商品列表的结束
- 没有参数

## 格式规范

### 商品配置顺序
建议按以下顺序配置每个商品：
1. `[item]` - 物品ID（必须）
2. `[price]` - 价格（必须）
3. `[stock]` - 库存（可选）
4. `[max buy]` - 购买限制（可选）
5. 其他高级配置标签

### 数值范围
- 物品ID：正整数，必须存在于游戏中
- 价格：0-2147483647
- 库存：-1（无限）或0以上整数
- 等级要求：0-100（根据游戏设定）

## 常见错误

### 1. 物品ID错误
❌ **错误**:
```
[item]	99999	// 不存在的物品ID
[item]	abc	// 非数字ID
```
✅ **正确**:
```
[item]	2001	// 有效的物品ID
```

### 2. 价格设置错误
❌ **错误**:
```
[price]	-100	// 负数价格
[price]	0.5	// 小数价格
```
✅ **正确**:
```
[price]	1000	// 正整数价格
[price]	0	// 免费（特殊情况）
```

### 3. 库存配置错误
❌ **错误**:
```
[stock]	-5	// 负数库存（除-1外）
```
✅ **正确**:
```
[stock]	10	// 具体库存数量
[stock]	-1	// 无限库存
```

## 最佳实践

1. **合理定价**: 根据物品价值设置合理价格
2. **控制稀有度**: 通过库存和购买限制控制稀有物品
3. **等级匹配**: 确保等级要求与物品等级匹配
4. **职业限制**: 正确设置职业和性别限制
5. **测试验证**: 确保所有物品ID都有效存在

## 相关文档

- [基础信息标签详解](../01-基础信息标签/基础信息标签详解.md)
- [商店配置标签详解](../02-商店配置标签/商店配置标签详解.md)
- [实际示例](../04-实际示例/)
- [PVF文件格式规范](../../PVF文件格式规范.md)