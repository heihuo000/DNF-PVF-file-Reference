# SHO文件商店配置标签详解

## 概述

商店配置标签控制着SHO文件中商店的高级功能和特殊行为。这些标签定义了商店的运营模式、访问权限、刷新机制等重要特性。

## 高级配置标签

### 1. [refresh type] - 刷新类型
**功能**: 定义商店商品的刷新机制
**语法**: `[refresh type]	<数值>`
**示例**:
```
[refresh type]	0	// 不刷新
[refresh type]	1	// 定时刷新
[refresh type]	2	// 条件刷新
```
**说明**:
- 0: 商品不刷新（静态商店）
- 1: 按时间定时刷新
- 2: 按特定条件刷新
- 影响商品的可用性和稀有度

### 2. [refresh time] - 刷新时间
**功能**: 设置商店刷新的时间间隔（秒）
**语法**: `[refresh time]	<数值>`
**示例**:
```
[refresh time]	3600	// 每小时刷新一次
[refresh time]	86400	// 每天刷新一次
```
**说明**:
- 单位为秒
- 仅在 `[refresh type]` 为1时有效
- 0表示不定时刷新

### 3. [access level] - 访问等级
**功能**: 设置访问商店所需的最低等级
**语法**: `[access level]	<数值>`
**示例**:
```
[access level]	1	// 1级以上可访问
[access level]	50	// 50级以上可访问
```
**说明**:
- 限制低等级玩家访问
- 0表示无等级限制
- 用于高级商店的访问控制

### 4. [currency type] - 货币类型
**功能**: 指定商店接受的货币类型
**语法**: `[currency type]	<数值>`
**示例**:
```
[currency type]	0	// 金币
[currency type]	1	// 点券
[currency type]	2	// 特殊货币
```
**说明**:
- 0: 游戏金币（默认）
- 1: 点券/现金货币
- 2: 特殊货币（如荣誉点等）
- 影响玩家的购买能力

### 5. [discount rate] - 折扣率
**功能**: 设置商店的全局折扣率
**语法**: `[discount rate]	<数值>`
**示例**:
```
[discount rate]	100	// 无折扣（原价）
[discount rate]	80	// 8折优惠
[discount rate]	50	// 5折优惠
```
**说明**:
- 数值范围：1-100
- 100表示原价，数值越小折扣越大
- 影响所有商品的最终价格

### 6. [vip only] - VIP专属
**功能**: 设置商店是否仅对VIP开放
**语法**: `[vip only]	<布尔值>`
**示例**:
```
[vip only]	1	// 仅VIP可访问
[vip only]	0	// 所有玩家可访问
```
**说明**:
- 1: 仅VIP玩家可访问
- 0: 所有玩家可访问（默认）
- 用于特权商店设置

### 7. [max purchase] - 最大购买数量
**功能**: 限制单个玩家的最大购买数量
**语法**: `[max purchase]	<数值>`
**示例**:
```
[max purchase]	10	// 每个玩家最多购买10个
[max purchase]	0	// 无购买限制
```
**说明**:
- 0表示无限制
- 正整数表示具体限制数量
- 可用于限量商品控制

### 8. [purchase cooldown] - 购买冷却时间
**功能**: 设置购买后的冷却时间（秒）
**语法**: `[purchase cooldown]	<数值>`
**示例**:
```
[purchase cooldown]	300	// 购买后5分钟冷却
[purchase cooldown]	0	// 无冷却时间
```
**说明**:
- 单位为秒
- 0表示无冷却限制
- 防止频繁购买

## 特殊功能标签

### 1. [event shop] - 活动商店
**功能**: 标记为活动期间的特殊商店
**语法**: `[event shop]	<布尔值>`
**示例**:
```
[event shop]	1	// 活动商店
[event shop]	0	// 普通商店
```
**说明**:
- 1: 活动商店（可能有特殊规则）
- 0: 普通商店（默认）

### 2. [reputation required] - 声望要求
**功能**: 设置访问商店所需的声望值
**语法**: `[reputation required]	<数值>`
**示例**:
```
[reputation required]	1000	// 需要1000声望
[reputation required]	0	// 无声望要求
```
**说明**:
- 0表示无声望要求
- 正整数表示具体声望值
- 用于声望商店系统

### 3. [guild only] - 公会专属
**功能**: 设置商店是否仅对公会成员开放
**语法**: `[guild only]	<布尔值>`
**示例**:
```
[guild only]	1	// 仅公会成员可访问
[guild only]	0	// 所有玩家可访问
```
**说明**:
- 1: 仅公会成员可访问
- 0: 所有玩家可访问（默认）

## 配置组合示例

### 普通商店配置
```
[refresh type]	0	// 不刷新
[access level]	1	// 1级以上可访问
[currency type]	0	// 接受金币
[discount rate]	100	// 原价销售
[vip only]	0	// 所有玩家可访问
```

### VIP限时商店配置
```
[refresh type]	1	// 定时刷新
[refresh time]	86400	// 每天刷新
[access level]	30	// 30级以上可访问
[currency type]	1	// 接受点券
[discount rate]	80	// 8折优惠
[vip only]	1	// 仅VIP可访问
[max purchase]	5	// 每人最多购买5个
```

### 公会声望商店配置
```
[refresh type]	2	// 条件刷新
[access level]	40	// 40级以上可访问
[currency type]	2	// 特殊货币
[reputation required]	5000	// 需要5000声望
[guild only]	1	// 仅公会成员
[purchase cooldown]	3600	// 1小时冷却
```

## 格式规范

### 数值范围
- 时间相关：0-2147483647（秒）
- 百分比：0-100
- 等级：1-100（根据游戏设定）
- 布尔值：0或1

### 标签顺序
建议按以下顺序排列配置标签：
1. 基础配置（refresh type, access level等）
2. 货币和价格配置
3. 访问权限配置
4. 特殊功能配置

## 常见错误

### 1. 数值超出范围
❌ **错误**:
```
[discount rate]	150	// 超出100的范围
[access level]	-1	// 负数等级
```
✅ **正确**:
```
[discount rate]	100	// 在有效范围内
[access level]	1	// 正整数等级
```

### 2. 逻辑冲突
❌ **错误**:
```
[refresh type]	0	// 不刷新
[refresh time]	3600	// 但设置了刷新时间
```
✅ **正确**:
```
[refresh type]	1	// 定时刷新
[refresh time]	3600	// 对应的刷新时间
```

## 最佳实践

1. **合理设置刷新机制**: 根据商品稀有度设置合适的刷新类型
2. **平衡访问限制**: 避免过于严格的访问条件
3. **考虑游戏平衡**: 折扣率和限购数量要考虑游戏经济平衡
4. **测试配置组合**: 确保各种配置标签之间没有冲突

## 相关文档

- [基础信息标签详解](../01-基础信息标签/基础信息标签详解.md)
- [商品配置标签详解](../03-商品配置标签/商品配置标签详解.md)
- [实际示例](../04-实际示例/)
- [PVF文件格式规范](../../PVF文件格式规范.md)