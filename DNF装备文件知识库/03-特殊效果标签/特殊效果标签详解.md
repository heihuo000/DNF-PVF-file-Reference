# DNF装备文件特殊效果标签详解

## 📖 概述

特殊效果标签是DNF装备文件中最复杂和功能最丰富的部分，涵盖了技能增强、套装效果、战斗加成、状态控制等多个方面。这些标签让装备具备了独特的游戏机制和战斗效果。

---

## 🎯 技能相关标签

### 技能等级提升
```
[skill levelup]
<技能ID> <提升等级>
```
- **功能**: 提升指定技能的等级
- **示例**: `[skill levelup] 1001 2` (提升技能1001的等级2级)
- **注意**: 技能ID需要对应游戏中的实际技能

### 技能数据修改
```
[skill data up]
<技能ID> <数据索引> <修改值>
```
- **功能**: 修改技能的特定数据
- **示例**: `[skill data up] 1001 0 100` (修改技能1001的第0个数据为100)
- **用途**: 调整技能伤害、冷却时间、消耗等

### 技能数据设置
```
[skill data]
<技能ID> <数据索引> <设置值>
```
- **功能**: 直接设置技能数据值
- **示例**: `[skill data] 1002 1 50`
- **区别**: 与skill data up不同，这是直接设置而非增加

### 时装可选择能力
```
[avatar select ability]
    [SKILL_LEVEL] <技能ID> <等级>
    [MOVE_SPEED] <数值>
    [HP MAX] <数值>
    [MAGICAL_DEFENSE] <数值>
    [PHYSICAL_DEFENSE] <数值>
    [ATTACK_SPEED] <数值>
    [CAST_SPEED] <数值>
    [INVENTORY_LIMIT] <数值>
```
- **功能**: 时装可选择的能力加成
- **示例**:
```
[avatar select ability]
    [SKILL_LEVEL] 1001 1
    [MOVE_SPEED] 30
    [HP MAX] 200
```

---

## 🎁 套装效果标签

### 套装名称
```
[set name]
<套装名称>
```
- **功能**: 定义套装的名称
- **示例**: `[set name] 传说套装`

### 套装物品列表
```
[set item]
<物品ID1> <物品ID2> <物品ID3> ...
```
- **功能**: 定义套装包含的所有物品
- **示例**: `[set item] 12345 12346 12347 12348 12349`

### 套装效果
```
[set ability]
<件数> <效果标签> <数值>
<件数> <效果标签> <数值>
...
```
- **功能**: 定义穿戴指定件数时的效果
- **示例**:
```
[set ability]
2 [HP MAX] 500
3 [physical attack] 30
5 [skill levelup] 1001 1
```

### 套装基本说明
```
[fullset basic explain]
<说明文本>
```
- **功能**: 套装的基本说明
- **示例**: `[fullset basic explain] 传说中的强力套装`

### 套装详细说明
```
[fullset detail explain]
<详细说明文本>
```
- **功能**: 套装的详细说明
- **示例**: `[fullset detail explain] 集齐全套可获得强大的力量加成`

### 套装主控物品
```
[set item master]
<主控物品ID>
```
- **功能**: 指定套装的主控物品
- **示例**: `[set item master] 12345`

### 分件套装效果
```
[piece set ability]
<物品ID> <效果标签> <数值>
```
- **功能**: 单件物品的套装效果
- **示例**: `[piece set ability] 12345 [HP MAX] 100`

---

## ⚔️ 攻击和暴击标签

### 物理暴击率
```
[critical hit]
<暴击率百分比>
```
- **功能**: 增加物理暴击率
- **示例**: `[critical hit] 8` (增加8%物理暴击率)

### 魔法暴击率
```
[magical critical hit]
<暴击率百分比>
```
- **功能**: 增加魔法暴击率
- **示例**: `[magical critical hit] 6` (增加6%魔法暴击率)

### 暴击伤害增加
```
[critical damage]
<伤害增加百分比>
```
- **功能**: 增加暴击时的伤害
- **示例**: `[critical damage] 15` (暴击伤害增加15%)

### 命中率
```
[accuracy]
<命中率百分比>
```
- **功能**: 增加攻击命中率
- **示例**: `[accuracy] 5` (增加5%命中率)

### 攻击属性
```
[attack property]
<属性类型>
```
- **功能**: 设置攻击的属性类型
- **可选值**: `[fire]`, `[water]`, `[dark]`, `[light]`
- **示例**: `[attack property] [fire]`

### 推力
```
[push power]
<推力数值>
```
- **功能**: 攻击时的推力效果
- **示例**: `[push power] 15`

### 浮空力
```
[lift power]
<浮空力数值>
```
- **功能**: 攻击时的浮空效果
- **示例**: `[lift power] 12`

---

## 💀 特殊伤害加成标签

### 对人类伤害增加
```
[human damage rate]
<伤害增加百分比>
```
- **功能**: 对人类敌人的伤害增加
- **示例**: `[human damage rate] 10` (对人类伤害增加10%)

### 对要塞伤害增加
```
[fort damage rate]
<伤害增加百分比>
```
- **功能**: 对要塞类敌人的伤害增加
- **示例**: `[fort damage rate] 15`

### 对怪物伤害增加
```
[monster damage rate]
<伤害增加百分比>
```
- **功能**: 对怪物的伤害增加
- **示例**: `[monster damage rate] 8`

### HP吸收
```
[HP drain]
<吸收百分比>
```
- **功能**: 攻击时吸收敌人HP
- **示例**: `[HP drain] 3` (吸收3%的伤害作为HP)

### MP吸收
```
[MP drain]
<吸收百分比>
```
- **功能**: 攻击时吸收敌人MP
- **示例**: `[MP drain] 2` (吸收2%的伤害作为MP)

---

## 🛡️ 状态异常控制标签

### 主动状态控制信息
```
[active status control info]
    [bleeding] <概率> <等级> <持续时间>
    [freeze] <概率> <等级> <持续时间>
    [stun] <概率> <等级> <持续时间>
    [poison] <概率> <等级> <持续时间>
    [curse] <概率> <等级> <持续时间>
    [slow] <概率> <等级> <持续时间>
    [stone] <概率> <等级> <持续时间>
    [sleep] <概率> <等级> <持续时间>
    [confuse] <概率> <等级> <持续时间>
    [hold] <概率> <等级> <持续时间>
    [burn] <概率> <等级> <持续时间>
    [lightning] <概率> <等级> <持续时间>
    [blind] <概率> <等级> <持续时间>
```
- **功能**: 攻击时施加状态异常的概率和效果
- **示例**:
```
[active status control info]
    [bleeding] 10 5 3000
    [freeze] 5 3 2000
```

---

## 🔄 条件效果标签

### 条件判断
```
[if-then]
<条件> <效果>
```
- **功能**: 满足条件时触发效果
- **示例**: `[if-then] [HP < 30%] [physical attack] +50`

### 等级线性能力
```
[level linear ability]
<起始等级> <结束等级> <效果标签> <起始值> <结束值>
```
- **功能**: 根据等级线性变化的能力
- **示例**: `[level linear ability] 1 70 [HP MAX] 100 1000`

### 等级分段能力
```
[level section ability]
<等级1> <效果1>
<等级2> <效果2>
...
```
- **功能**: 不同等级段的不同效果
- **示例**:
```
[level section ability]
20 [HP MAX] 200
40 [HP MAX] 400
60 [HP MAX] 600
```

---

## 📊 数据存储标签

### 整数数据存储
```
[int data]
<索引> <数值>
```
- **功能**: 存储整数数据供其他系统使用
- **示例**: `[int data] 0 12345`

### 字符串数据存储
```
[string data]
<索引> <字符串>
```
- **功能**: 存储字符串数据
- **示例**: `[string data] 0 "特殊标记"`

---

## ⚙️ 使用注意事项

### 1. 标签格式
- 所有标签必须用方括号 `[]` 包围
- 标签名称区分大小写
- 数值可以是正数、负数或小数

### 2. 技能ID规范
- 技能ID必须对应游戏中的实际技能
- 不同职业的技能ID不同
- 建议查阅技能ID对照表

### 3. 套装效果规范
- 套装物品ID必须真实存在
- 套装效果会覆盖单件装备效果
- 件数效果按穿戴件数自动激活

### 4. 状态异常参数
- 概率: 0-100的整数，表示百分比
- 等级: 状态异常的强度等级
- 持续时间: 毫秒为单位

### 5. 条件判断语法
- 支持基本的比较运算符: `<`, `>`, `<=`, `>=`, `==`, `!=`
- 支持逻辑运算符: `&&` (与), `||` (或), `!` (非)
- 条件中可以引用角色属性和装备属性

---

## 💡 完整示例

```
[name] 传说之剑
[grade] 5
[rarity] 4
[equipment type] [weapon]
[sub type] [sword]
[usable job] [swordman]
[minimum level] 50

// 基础攻击力
[equipment physical attack] +850

// 技能增强
[skill levelup] 1001 2
[skill data up] 1002 0 150

// 暴击效果
[critical hit] 8
[critical damage] 20

// 特殊伤害
[human damage rate] 15
[HP drain] 3

// 状态异常
[active status control info]
    [bleeding] 10 5 3000
    [stun] 5 3 2000

// 套装效果
[set name] 传说套装
[set item] 12345 12346 12347 12348 12349
[set ability]
2 [HP MAX] 500
3 [physical attack] 30
5 [skill levelup] 1003 1

// 条件效果
[if-then] [HP < 30%] [attack speed] +50

// 等级线性能力
[level linear ability] 50 70 [magical attack] 20 50

[icon] equipment/sword_legend.img
[move wav] sound/sword_move.wav
[use wav] sound/sword_use.wav
```

---

*特殊效果标签是装备个性化的核心，合理运用这些标签可以创造出独特而强大的装备效果*