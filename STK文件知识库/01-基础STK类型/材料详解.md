# 材料STK文件详解

## 📋 概述

材料是DNF中用于制作、强化、附魔等用途的STK文件类型，包括矿石、布料、怪物材料、附魔卡片等。

## 🏷️ 基本标签结构

### 物品基本信息
```
[name] `钢铁片`                   // 材料名称
[name2] `Steel Fragment`          // 英文名称(可选)
[explain]                         // 材料说明开始
`坚硬的钢铁碎片
可用于武器制作和强化`
[/explain]                        // 材料说明结束
[flavor text] `工匠的必需品`       // 风味文本
```

### 等级与稀有度
```
[grade] 25                        // 材料等级
[rarity] 0                        // 稀有度
// 0: 普通材料(白色)
// 1: 高级材料(蓝色)
// 2: 稀有材料(紫色)
// 3: 传说材料(粉色)
// 4: 史诗材料(橙色)
```

### 重量与限制
```
[weight] 1                        // 重量 (材料通常较轻)
[minimum level] 20                // 使用最低等级
[stack limit] 9999                // 堆叠上限 (材料通常可大量堆叠)
```

## 💰 经济属性

### 交易属性
```
[attach type] `[trade]`           // 交易类型
// 材料通常可自由交易
```

### 价格设定
```
[price] 500                       // NPC购买价格
[value] 250                       // NPC出售价格
[creation rate] 8                 // 生成概率
```

## 📦 材料类型

### 类型定义
```
[stackable type] `[material]` 0   // 材料类型
```

### 子类型分类
```
[sub type] 1                      // 子类型
```

**材料子类型**:
- `0` - 普通材料
- `1` - 怪物卡片
- `2` - 强化材料
- `3` - 附魔材料
- `4` - 制作材料
- `5` - 特殊材料

## 🎨 视觉与音效

### 图标设定
```
[icon] `MaterialIcon.img` 25      // 材料图标
[field image] `MaterialField.img` 12 // 掉落显示图像
```

### 音效设定
```
[move wav] `MATERIAL_TOUCH`       // 移动音效
// 材料通常没有使用音效
```

## 🃏 怪物卡片材料

### 卡片基本信息
```
[stackable type] `[material]` 4   // 材料类型，价格表索引4
[sub type] 1                      // 子类型1表示怪物卡片

[string data]                     // 字符串数据开始
`Interface/MonsterCard/cut_cardimage.img` // 卡片图像包
`[weapon]`                        // 附魔目标部位
`[foil]`                         // 闪卡标识
`[unlimited challenge]`           // 活动名称
[/string data]                   // 字符串数据结束

[int data]                        // 整数数据开始
15                               // 卡片图像索引
3025                             // 怪物ID
[/int data]                      // 整数数据结束
```

### 附魔属性
```
[enchant]                         // 附魔属性开始
[HP MAX] +150                     // 最大HP增加
[MP MAX] +80                      // 最大MP增加
[physical attack] +25             // 物理攻击力增加
[magical attack] +30              // 魔法攻击力增加
[physical defense] +20            // 物理防御力增加
[magical defense] +25             // 魔法防御力增加
[fire attack] +10                 // 火属性攻击增加
[water attack] +10                // 水属性攻击增加
[dark attack] +10                 // 暗属性攻击增加
[light attack] +10                // 光属性攻击增加
[fire resistance] +15             // 火抗性增加
[water resistance] +15            // 水抗性增加
[dark resistance] +15             // 暗抗性增加
[light resistance] +15            // 光抗性增加
[poison resistance] +20           // 中毒抗性增加
[slow resistance] +20             // 减速抗性增加
[stun resistance] +20             // 眩晕抗性增加
[sleep resistance] +20            // 睡眠抗性增加
[freeze resistance] +20           // 冰冻抗性增加
[stone resistance] +20            // 石化抗性增加
[blind resistance] +20            // 失明抗性增加
[confuse resistance] +20          // 混乱抗性增加
[inventory limit] +50             // 负重上限增加
[move speed] +2                   // 移动速度增加
[attack speed] +3                 // 攻击速度增加
[cast speed] +4                   // 施法速度增加
[hit recovery] +5                 // 硬直恢复增加
[jump power] +10                  // 跳跃力增加
[room list move speed rate] +5    // 房间移动速度增加
[/enchant]                        // 附魔属性结束
```

### 附魔目标部位
```
// 在string data中指定附魔目标:
`[weapon]`        // 武器
`[jacket]`        // 上衣
`[shoulder]`      // 护肩
`[pants]`         // 下装
`[shoes]`         // 鞋子
`[belt]`          // 腰带
`[bracelet]`      // 手镯
`[necklace]`      // 项链
`[ring]`          // 戒指
`[support]`       // 辅助装备
`[magic stone]`   // 魔法石
`[earring]`       // 耳环
```

## 🔨 制作材料

### 制作用途标识
```
[int data]                        // 整数数据
1                                // 材料类型标识
25                               // 材料等级
100                              // 材料品质
[/int data]

[string data]                     // 字符串数据
`[craftmanship]`                 // 制作类型
`steel`                          // 材料标识
[/string data]
```

### 制作类型
- `[craftmanship]` - 工艺制作
- `[weaving]` - 纺织制作
- `[machinary]` - 机械制作
- `[chemistry]` - 化学制作
- `[enchant]` - 附魔制作

## ⚡ 强化材料

### 强化属性
```
[int data]                        // 强化数据
2                                // 强化类型 (1:武器 2:防具)
5                                // 强化等级上限
100                              // 成功率加成
[/int data]

[string data]                     // 强化信息
`[weapon enhance]`               // 强化类型
`fire`                          // 属性类型
[/string data]
```

## 🎁 特殊材料

### 任务材料
```
[stackable type] `[quest]` 0      // 任务道具类型
[linking quest index] 1500        // 关联任务ID

[int data]
1500                             // 任务ID
1                                // 任务阶段
[/int data]
```

### 活动材料
```
[string data]
`[event]`                        // 活动标识
`summer_festival_2024`           // 活动名称
[/string data]

[int data]
20240701                         // 活动开始日期
20240731                         // 活动结束日期
[/int data]
```

## 📋 完整示例

### 普通材料示例
```
[name] `钢铁片`
[explain]
`坚硬的钢铁碎片
可用于武器制作和强化`
[grade] 25
[rarity] 0
[attach type] `[trade]`
[creation rate] 8
[weight] 1
[usable job]
`[all]`
[/usable job]
[minimum level] 20
[stackable type] `[material]` 0
[sub type] 4
[icon] `MaterialIcon.img` 25
[field image] `MaterialField.img` 12
[price] 500
[value] 250
[move wav] `MATERIAL_TOUCH`
[stack limit] 9999
[int data]
1
25
100
[/int data]
[string data]
`[craftmanship]`
`steel`
[/string data]
```

### 怪物卡片示例
```
[name] `哥布林卡片`
[explain]
`哥布林的怪物卡片
可用于装备附魔`
[grade] 15
[rarity] 1
[attach type] `[trade]`
[creation rate] 6
[weight] 1
[usable job]
`[all]`
[/usable job]
[minimum level] 10
[stackable type] `[material]` 4
[sub type] 1
[icon] `MonsterCard.img` 15
[field image] `MonsterCardField.img` 8
[price] 1000
[value] 500
[move wav] `CARD_TOUCH`
[stack limit] 999
[string data]
`Interface/MonsterCard/cut_cardimage.img`
`[weapon]`
`[normal]`
`[unlimited challenge]`
[/string data]
[int data]
15
3025
[/int data]
[enchant]
[physical attack] +25
[HP MAX] +150
[fire resistance] +15
[/enchant]
```

## 💡 设计建议

### 数值平衡
1. **属性加成**: 根据材料等级合理设定属性加成
2. **稀有度匹配**: 稀有度应与属性强度匹配
3. **价格合理**: 考虑获取难度设定价格

### 功能设计
1. **用途明确**: 清楚标识材料的用途
2. **兼容性**: 确保与制作系统兼容
3. **堆叠合理**: 设定合适的堆叠上限

### 视觉设计
1. **图标清晰**: 选择易于识别的图标
2. **分类明确**: 不同类型材料使用不同图标风格
3. **品质区分**: 通过颜色区分材料品质

## 🔗 相关链接

- [消耗品详解](消耗品详解.md)
- [高级STK类型](../02-高级STK类型/)
- [标签索引](../03-标签索引/)
- [实用工具](../04-实用工具/)