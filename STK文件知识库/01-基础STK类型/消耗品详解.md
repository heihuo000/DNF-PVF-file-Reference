# 消耗品STK文件详解

## 📋 概述

消耗品是DNF中最常见的STK文件类型，包括药水、食物、卷轴等一次性使用的物品。

## 🏷️ 基本标签结构

### 物品基本信息
```
[name] `高级生命药水`              // 物品名称
[name2] `Advanced HP Potion`      // 英文名称(可选)
[explain]                         // 物品说明开始
`恢复大量生命值的高级药水
使用后立即恢复5000点HP`
[/explain]                        // 物品说明结束
[flavor text] `炼金术师的杰作`     // 风味文本
```

### 等级与稀有度
```
[grade] 35                        // 物品等级 (1-85)
[rarity] 1                        // 稀有度
// 0: 普通(白色)
// 1: 高级(蓝色) 
// 2: 稀有(紫色)
// 3: 传说(粉色)
// 4: 史诗(橙色)
```

### 重量与限制
```
[weight] 10                       // 重量 (单位: 10g)
[minimum level] 30                // 使用最低等级
[stack limit] 100                 // 堆叠上限 (0=无限制)
```

### 职业限制
```
[usable job]                      // 可使用职业开始
`[all]`                          // 全职业可用
[/usable job]                    // 职业限制结束

// 指定职业示例:
[usable job]
`[swordman]`                     // 鬼剑士
`[fighter]`                      // 格斗家
`[gunner]`                       // 神枪手
`[mage]`                         // 魔法师
`[priest]`                       // 圣职者
`[thief]`                        // 暗夜使者
[/usable job]
```

## 💰 经济属性

### 交易属性
```
[attach type] `[trade]`           // 交易类型
// `[free]` - 自由交易
// `[trade]` - 可交易
// `[trade delete]` - 交易后删除
// `[sealing]` - 封印状态
// `[account]` - 账号绑定
```

### 价格设定
```
[price] 1000                      // NPC购买价格
[cash] 50                         // 点券价格
[medal] 10                        // 勋章价格
[value] 500                       // NPC出售价格
[finish point price] 5            // FP价格
```

### 生成概率
```
[creation rate] 5                 // 生成概率 (建议≤10)
// 数值越小越稀有，0为不生成
```

## 🎨 视觉与音效

### 图标设定
```
[icon] `StackableIcon.img` 15     // 图标文件和帧索引
[field image] `StackableField.img` 8 // 掉落时显示图像
```

### 音效设定
```
[move wav] `POTION_TOUCH`         // 移动音效
[use wav] `POTION_USE`            // 使用音效
```

## ⏱️ 冷却系统

### 基本冷却
```
[cool time] 3000                  // 使用冷却时间 (毫秒)
[쿨타입 그룹] 1                    // 冷却组
// -1: 独立冷却
// 0: 默认组
// 1-99: 自定义组 (同组共享冷却)
```

### 队伍冷却
```
[party cooltime] 1                // 队伍共享冷却
// 0: 个人冷却
// 1: 队伍共享冷却
```

## 📦 物品类型

### 类型定义
```
[stackable type] `[waste]` 14     // 物品类型和价格表索引
```

**消耗品相关类型**:
- `[waste]` - 消耗品
- `[material]` - 材料
- `[quest]` - 任务道具
- `[etc]` - 其他物品

### 子类型
```
[sub type] 0                      // 子类型
// 0: 普通消耗品
// 1: 特殊消耗品
// 2: 任务消耗品
```

## 🎯 属性效果

### 属性变化
```
[stat change]                     // 属性变化开始
`+` 5000 `HP`                    // 恢复5000点HP
`+` 3000 `MP`                    // 恢复3000点MP
`+` 100 `physical attack`        // 增加100点物理攻击
`+` 50 `magical attack`          // 增加50点魔法攻击
`+` 20 `move speed`              // 增加20点移动速度
`+` 15 `attack speed`            // 增加15点攻击速度
`+` 10 `cast speed`              // 增加10点施法速度
[/stat change]
```

### 持续时间
```
[stat change duration] 30000 `myself` // 持续30秒，作用于自身
// `myself` - 作用于自身
// `party` - 作用于队伍
// `all` - 作用于所有人
```

### 抗性效果
```
[stat change]
`+` 50 `fire resistance`         // 增加50点火抗性
`+` 50 `water resistance`        // 增加50点水抗性
`+` 50 `dark resistance`         // 增加50点暗抗性
`+` 50 `light resistance`        // 增加50点光抗性
`+` 30 `poison resistance`       // 增加30点中毒抗性
`+` 30 `slow resistance`         // 增加30点减速抗性
[/stat change]
```

## 🔧 数据存储

### 整数数据
```
[int data]                        // 整数数据开始
1                                // 数据1: 效果类型
5000                             // 数据2: 效果数值
30000                            // 数据3: 持续时间
[/int data]                      // 整数数据结束
```

### 字符串数据
```
[string data]                     // 字符串数据开始
`Effect/Potion/heal.ptl`         // 数据1: 特效文件
`HEAL_SOUND`                     // 数据2: 音效标识
[/string data]                   // 字符串数据结束
```

## 🎯 特殊功能

### 使用场所限制
```
[action usable place]             // 可使用场所开始
`[village]`                      // 城镇
`[dungeon]`                      // 地下城
`[pvp]`                         // PVP场所
[/action usable place]           // 使用场所结束
```

### 功能类型
```
[action type]                     // 功能类型开始
`[heal]`                         // 治疗功能
5000                             // 治疗数值
0                                // 额外参数
[/action type]                   // 功能类型结束
```

## 📋 完整示例

```
[name] `高级生命药水`
[explain]
`恢复大量生命值的高级药水
使用后立即恢复5000点HP`
[grade] 35
[rarity] 1
[attach type] `[trade]`
[creation rate] 5
[weight] 10
[usable job]
`[all]`
[/usable job]
[minimum level] 30
[stackable type] `[waste]` 14
[sub type] 0
[icon] `StackableIcon.img` 15
[field image] `StackableField.img` 8
[price] 1000
[cash] 50
[medal] 10
[value] 500
[cool time] 3000
[쿨타입 그룹] 1
[party cooltime] 0
[move wav] `POTION_TOUCH`
[use wav] `POTION_USE`
[stack limit] 100
[stat change]
`+` 5000 `HP`
[/stat change]
[stat change duration] 0 `myself`
[action usable place]
`[village]`
`[dungeon]`
`[pvp]`
[/action usable place]
[int data]
1
5000
0
[/int data]
[string data]
`Effect/Potion/heal.ptl`
`HEAL_SOUND`
[/string data]
```

## 💡 设计建议

### 数值平衡
1. **恢复量设定**: 根据等级合理设定恢复量
2. **冷却时间**: 效果越强，冷却时间越长
3. **价格平衡**: 考虑游戏经济平衡

### 使用体验
1. **音效选择**: 选择合适的音效增强体验
2. **特效搭配**: 使用合适的粒子特效
3. **描述清晰**: 准确描述物品效果

### 常见错误
1. **数值过大**: 避免设定过高的恢复量
2. **冷却过短**: 防止频繁使用破坏平衡
3. **职业限制**: 注意职业限制的合理性

## 🔗 相关链接

- [高级STK类型](../02-高级STK类型/)
- [标签索引](../03-标签索引/)
- [实用工具](../04-实用工具/)