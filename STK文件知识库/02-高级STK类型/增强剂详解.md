# 增强剂STK文件详解

## 📋 概述

增强剂是DNF中的高级STK文件类型，用于创建各种抽奖盒子和增强道具，可以随机给予玩家不同类型的奖励。

## 🏷️ 基本标签结构

### 物品基本信息
```
[name] `高级装备增强剂`           // 增强剂名称
[name2] `Advanced Equipment Booster` // 英文名称(可选)
[explain]                         // 增强剂说明开始
`包含各种高级装备的神秘盒子
使用后可随机获得强力装备`
[/explain]                        // 增强剂说明结束
[flavor text] `命运的馈赠`         // 风味文本
```

### 等级与稀有度
```
[grade] 60                        // 增强剂等级
[rarity] 3                        // 稀有度 (增强剂通常较稀有)
[weight] 10                       // 重量
[minimum level] 50                // 使用最低等级
```

## 📦 增强剂类型

### 类型定义
```
[stackable type] `[booster]` 0    // 增强剂类型
// 或者
[stackable type] `[cera booster]` 0 // 点券增强剂类型
```

### 子类型分类
```
[sub type] 0                      // 子类型
```

**增强剂子类型**:
- `0` - 普通增强剂
- `1` - 高级增强剂
- `2` - 特殊增强剂
- `3` - 活动增强剂

## 💰 经济属性

### 交易属性
```
[attach type] `[trade]`           // 交易类型
// 增强剂通常可交易
```

### 价格设定
```
[price] 5000                      // NPC购买价格
[cash]  200                        // 点券价格
[value] 2500                      // NPC出售价格
[creation rate] 3                 // 生成概率 (较低)
```

## 🎁 增强剂奖励系统

### 增强剂信息结构
```
[booster info]                    // 增强剂信息开始

[avatar]                          // 时装奖励
3                                // 奖励数量
39001 1000 1 7 0                 // 物品ID 概率 数量 期限(天) 能力值
39002 800 1 30 0                 // 7天期限时装
39003 500 1 0 0                  // 永久时装
[/avatar]

[cera]                           // 点券道具奖励
2                                // 奖励数量
8001    1500    10                     // 物品ID 概率 数量
8002    800    5                       // 
[/cera]

[creature]                       // 宠物奖励
2                                // 奖励数量
9001    500    1                       // 宠物ID 概率 数量
9002    300    1                       // 
[/creature]

[equipment]                      // 装备奖励
5                                // 奖励数量
10001    2000    1                     // 装备ID 概率 数量
10002    1500    1                     // 
10003    1000    1                     // 
10004    800    1                      // 
10005    500    1                      // 
[/equipment]

[stackable]                      // 消耗品奖励
4                                // 奖励数量
20001    3000    10                    // 消耗品ID 概率 数量
20002    2000    5                      // 
20003    1500    3                     // 
20004    1000    1                     // 
[/stackable]

[etc]                           // 其他物品奖励
3                               // 奖励数量
30001    1000    1                    // 其他物品ID 概率 数量
30002    800    1                     // 
30003    500    1                     // 
[/etc]

[/booster info]                 // 增强剂信息结束
```

## 🎯 概率系统详解

### 概率计算
```
// 概率单位: 十万分率
// 1000 = 1%
// 100 = 0.1%
// 10 = 0.01%
// 1 = 0.001%

// 示例概率分布:
物品A: 5000 (5%)
物品B: 3000 (3%)
物品C: 2000 (2%)
物品D: 1000 (1%)
物品E: 500 (0.5%)
// 总概率: 11500 (11.5%)
// 剩余概率: 88500 (88.5%) 为空奖励或其他
```

### 多重奖励设置
```
[booster info]
[equipment]
3                               // 同时给予3件装备
10001    2000    1                    // 第一件装备
10002    1500    1                    // 第二件装备  
10003    1000    1                    // 第三件装备
[/equipment]

[stackable]
2                               // 同时给予2种消耗品
20001    5000    50                   // 50个消耗品A
20002    3000    20                   // 20个消耗品B
[/stackable]
[/booster info]
```

## 🎨 视觉与音效

### 图标设定
```
[icon] `BoosterIcon.img`    15       // 增强剂图标
[field image] `BoosterField.img`    8 // 掉落显示图像
```

### 音效设定
```
[move wav]  `BOOSTER_TOUCH`        // 移动音效
[use wav]  `BOOSTER_OPEN`          // 使用音效
```

## ⏱️ 冷却系统

### 使用限制
```
[cool time]    5000                  // 使用冷却时间 (毫秒)
[쿨타입 그룹]    2                    // 冷却组
[party cooltime]    0                // 个人冷却
```

### 使用场所
```
[action usable place]             // 可使用场所开始
`[village]`                      // 城镇
`[dungeon]`                      // 地下城
[/action usable place]           // 使用场所结束
```

## 📋 完整示例

### 装备增强剂示例
```
[name] `传说装备增强剂`
[explain]
`包含各种传说级装备的神秘盒子
使用后可随机获得强力传说装备`
[grade]    70
[rarity]    4
[attach type]    `[trade]`
[creation rate]    2
[weight]    15
[usable job]
`[all]`
[/usable job]
[minimum level]    60
[stackable type]    `[booster]` 0
[sub type]    1
[icon]    `BoosterIcon.img`    25
[field image]    `BoosterField.img`    12
[price]    10000
[cash]    500
[value]    5000
[cool time]    10000
[쿨타입 그룹]    2
[party cooltime]    0
[move wav]    `BOOSTER_TOUCH`
[use wav]    `BOOSTER_OPEN`
[stack limit]    99
[action usable place]
`[village]`
`[dungeon]`
[/action usable place]
[booster info]
[equipment]
8
11001    2500 1
11002    2000 1
11003    1500 1
11004    1200 1
11005    1000 1
11006    800 1
11007    600 1
11008    400 1
[/equipment]
[stackable]
3
21001    5000 10
21002    3000 5
21003    2000 3 
[/stackable]
[/booster info]
[int data]
1
70
0
[/int data]
[string data]
`legendary_equipment_booster`
`equipment`
[/string data]
```

### 综合奖励增强剂示例
```
[name] `幸运宝箱`
[explain]
`包含各种珍贵物品的幸运宝箱
可能获得装备、时装、宠物等奖励`
[grade]    50
[rarity]    3
[attach type]    `[trade]`
[creation rate]    4
[weight]    8
[usable job]
`[all]`
[/usable job]
[minimum level]    40
[stackable type]    `[booster]` 0
[sub type]    0
[icon]    `BoosterIcon.img`    30
[field image]    `BoosterField.img`    15
[price]    8000
[cash]    300
[value]    4000
[cool time]    3000
[쿨타입 그룹]    1
[party cooltime]    0
[move wav]    `BOX_TOUCH`
[use wav]    `BOX_OPEN`
[stack limit]    50
[action usable place]
`[village]`
[/action usable place]
[booster info]
[equipment]
5
    12001    1500   1
    12002    1200   1
    12003    1000   1
    12004    800   1
    12001 1500  1 
    12002 1200  1
    12003 1000  1
    12004 800  1
    12005 500  1
[/equipment]
[avatar]
3
40001    800    1   30   0
40002    600    1   7   0
40003    300    1   0   0
[/avatar]
[creature]
2
9501    400    1
9502    200    1
[/creature]
[stackable]
4
22001    3000    20
22002    2500    15
22003    2000    10
22004    1500    5
[/stackable]
[cera]
2
8501    1000    100
8502    500    50
[/cera]
[/booster info]
[int data]
2
50
1
[/int data]
[string data]
`lucky_treasure_box`
`mixed_rewards`
[/string data]
```

## 💡 设计建议

### 概率平衡
1. **稀有度梯度**: 设置合理的稀有度梯度
2. **总概率控制**: 确保总概率不超过100%
3. **保底机制**: 考虑设置保底奖励

### 奖励设计
1. **价值匹配**: 奖励价值应与增强剂价格匹配
2. **多样性**: 提供多种类型的奖励
3. **实用性**: 确保奖励对玩家有实际价值

### 用户体验
1. **期待感**: 通过稀有奖励创造期待感
2. **公平性**: 确保概率公开透明
3. **满足感**: 即使普通奖励也要有一定价值

### 经济影响
1. **通胀控制**: 避免过度影响游戏经济
2. **稀缺性**: 保持稀有物品的稀缺性
3. **循环性**: 考虑奖励的经济循环

## 🔗 相关链接

- [配方详解](配方详解.md)
- [潘多拉盒子详解](潘多拉盒子详解.md)
- [基础STK类型](../01-基础STK类型/)
- [实用工具](../04-实用工具/)