# CHR文件属性标签详解

## 概述

属性标签定义了角色的各种数值属性，包括生命值、魔法值、攻击力、防御力、抗性等核心战斗属性。

## 初始属性标签

### [initial value] - 初始属性值
定义角色的基础属性数值。

**语法：**
```
[initial value]
HP 生命值
MP 魔法值
攻击力 攻击力值
防御力 防御力值
力量 力量值
智力 智力值
体力 体力值
精神 精神值
[/initial value]
```

**示例：**
```
[initial value]	1000	200	100	50	30	25	20	15	// HP 1000, MP 200, 物攻 100, 物防 50, 魔攻 30, 魔防 25, 力量 20, 智力 15
```

### [regen speed] - 回复速度
定义角色的HP和MP回复速度。

**语法：**
```
[regen speed] HP回复速度 MP回复速度
```

**参数说明：**
- `HP回复速度`：每秒回复的HP点数
- `MP回复速度`：每秒回复的MP点数

**示例：**
```
[regen speed]	5	10	// 每秒回复5点HP，10点MP
```

### [move speed] - 移动速度
定义角色的移动和跳跃速度。

**语法：**
```
[move speed] 移动速度 跳跃速度
```

**参数说明：**
- `移动速度`：水平移动速度（像素/帧）
- `跳跃速度`：垂直跳跃初始速度

**示例：**
```
[move speed]	300	600	// 移动速度300，跳跃速度600
```

## 抗性属性标签

### 元素抗性

#### [fire resistance] - 火属性抗性
```
[fire resistance]	抗性值
```

#### [water resistance] - 水属性抗性
```
[water resistance]	抗性值
```

#### [light resistance] - 光属性抗性
```
[light resistance]	抗性值
```

#### [dark resistance] - 暗属性抗性
```
[dark resistance]	抗性值
```

**抗性值说明：**
- `0` - 无抗性（正常伤害）
- `正值` - 减少伤害（如50表示减少50%伤害）
- `负值` - 增加伤害（如-20表示增加20%伤害）
- `100` - 完全免疫

**示例：**
```
[fire resistance]	30     // 火抗30%
[water resistance]	-10   // 水弱10%
[light resistance]	0     // 光属性无抗性
[dark resistance]	50     // 暗抗50%
```

### 异常状态抗性

#### [stuck resistance] - 僵直抗性
```
[stuck resistance] 抗性值
```

#### [stone resistance] - 石化抗性
```
[stone resistance] 抗性值
```

#### [stun resistance] - 眩晕抗性
```
[stun resistance] 抗性值
```

#### [hold resistance] - 束缚抗性
```
[hold resistance] 抗性值
```

#### [freeze resistance] - 冰冻抗性
```
[freeze resistance] 抗性值
```

#### [sleep resistance] - 睡眠抗性
```
[sleep resistance] 抗性值
```

#### [curse resistance] - 诅咒抗性
```
[curse resistance] 抗性值
```

#### [slow resistance] - 减速抗性
```
[slow resistance] 抗性值
```

#### [poison resistance] - 中毒抗性
```
[poison resistance] 抗性值
```

#### [burn resistance] - 灼烧抗性
```
[burn resistance]	抗性值
```

#### [bleeding resistance] - 出血抗性
```
[bleeding resistance] 抗性值
```

#### [shock resistance] - 感电抗性
```
[shock resistance] 抗性值
```

**异常状态抗性说明：**
- `0` - 无抗性（正常持续时间）
- `正值` - 减少持续时间（如70表示减少70%持续时间）
- `100` - 完全免疫该异常状态

**示例：**
```
[stuck resistance]	50	// 僵直抗性50%
[stone resistance]	100	// 石化免疫
[stun resistance]	30	// 眩晕抗性30%
[poison resistance]	0	// 无中毒抗性
```

## 特殊属性标签

### [skill] - 技能相关属性
定义角色的技能相关参数。

**语法：**
```
[skill]
技能参数1 值1
技能参数2 值2
...
[/skill]
```

**常用技能参数：**
- `skill_mp_rate` - 技能MP消耗倍率
- `skill_cool_rate` - 技能冷却时间倍率
- `skill_damage_rate` - 技能伤害倍率

**示例：**
```
[skill]
	skill_mp_rate	1.0	// MP消耗正常
	skill_cool_rate	0.8	// 冷却时间减少20%
	skill_damage_rate	1.2	// 技能伤害增加20%
[/skill]
```

### [critical] - 暴击属性
定义暴击相关参数。

**语法：**
```
[critical]	暴击率	暴击伤害倍率
```

**参数说明：**
- `暴击率`：暴击概率（0-100）
- `暴击伤害倍率`：暴击时的伤害倍率

**示例：**
```
[critical]	15	1.5	// 15%暴击率，暴击伤害150%
```

### [hit recovery] - 受击恢复
定义角色受击后的恢复时间。

**语法：**
```
[hit recovery]	恢复时间
```

**参数说明：**
- `恢复时间`：受击后无法行动的时间（毫秒）

**示例：**
```
[hit recovery]	300	// 受击后300毫秒恢复
```

## 属性计算公式

### 最终伤害计算
```
最终伤害 = 基础伤害 × (1 - 抗性值/100)
```

### 异常状态持续时间
```
实际持续时间 = 基础持续时间 × (1 - 抗性值/100)
```

### 暴击伤害计算
```
暴击伤害 = 基础伤害 × 暴击伤害倍率
```

## 注意事项

1. **数值范围**：
   - HP/MP：建议1-99999
   - 抗性：-100到100
   - 速度：建议50-1000

2. **平衡性考虑**：
   - 过高的抗性会影响游戏平衡
   - 移动速度过快可能导致游戏体验问题

3. **兼容性**：
   - 确保属性值与游戏版本兼容
   - 某些属性可能在特定版本中无效

4. **性能影响**：
   - 过多的抗性计算可能影响性能
   - 建议只设置必要的抗性

## 相关文档

- [基础信息标签](../01-基础信息/基础信息标签.md)
- [成长类型详解](../05-成长类型/成长类型详解.md)
- [完整CHR示例](../06-实际示例/完整CHR示例.md)