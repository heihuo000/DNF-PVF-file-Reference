# DNF技能文件标签参考

## 概述

本文档详细介绍DNF技能文件(.skl)中所有可用的标签和参数，为技能修改和创建提供完整的参考。

## 文件结构

```
#PVF_File

[skill]
    [name] `技能名称`
    [explain] `技能说明`
    
    [basic info]
        // 基础信息标签
    [/basic info]
    
    [required level] 等级要求
    [required sp] SP要求
    
    [required skill]
        // 前置技能要求
    [/required skill]
    
    [level info]
        // 各等级数据
    [/level info]
    
[/skill]
```

## 基础信息标签 [basic info]

### 技能类型和分类

| 标签 | 说明 | 可选值 | 示例 |
|------|------|--------|------|
| `[skill type]` | 技能类型 | 0=主动, 1=被动, 2=觉醒 | `[skill type] 0` |
| `[skill class]` | 技能分类 | 0-9数字分类 | `[skill class] 1` |
| `[maximum level]` | 最大等级 | 1-70 | `[maximum level] 60` |
| `[growtype maximum level]` | 各转职最大等级 | 6个数字 | `[growtype maximum level] 60 60 60 60 60 60` |
| `[skill fitness growtype]` | 适用职业 | 职业ID列表 | `[skill fitness growtype] 0 1 2 3 4` |

### 消耗和冷却

| 标签 | 说明 | 单位 | 示例 |
|------|------|------|------|
| `[mp]` | MP消耗 | 数值 | `[mp] 10 12 14 16 18` |
| `[cool time]` | 冷却时间 | 毫秒 | `[cool time] 5000` |
| `[casting time]` | 施法时间 | 毫秒 | `[casting time] 500` |
| `[durability decrease rate]` | 武器耐久消耗 | 数值 | `[durability decrease rate] 10` |

### 技能属性

| 标签 | 说明 | 可选值 | 示例 |
|------|------|--------|------|
| `[can cancel]` | 可否取消 | 0=否, 1=是 | `[can cancel] 1` |
| `[need weapon]` | 需要武器 | 0=否, 1=是 | `[need weapon] 1` |
| `[weapon effect]` | 武器效果 | 0=否, 1=是 | `[weapon effect] 1` |
| `[pvp]` | PVP可用 | 0=否, 1=是 | `[pvp] 1` |

### 资源文件

| 标签 | 说明 | 格式 | 示例 |
|------|------|------|------|
| `[icon]` | 技能图标 | 路径 | `[icon] \`skill/swordman/upperslash.img\`` |
| `[command]` | 指令文件 | 路径 | `[command] \`command/swordman/upperslash.cld\`` |
| `[sound]` | 音效 | 音效名 | `[sound] \`UPPERSLASH_01\`` |

## 等级要求标签

| 标签 | 说明 | 格式 | 示例 |
|------|------|------|------|
| `[required level]` | 学习等级 | 数值 | `[required level] 15` |
| `[required sp]` | SP消耗 | 各等级数值 | `[required sp] 1 1 2 2 3 3` |

## 前置技能标签 [required skill]

| 标签 | 说明 | 格式 | 示例 |
|------|------|------|------|
| `[skill]` | 前置技能ID | 数值 | `[skill] 1` |
| `[level]` | 前置技能等级 | 数值 | `[level] 5` |

## 等级数据标签 [level info]

### 基础伤害

| 标签 | 说明 | 单位 | 示例 |
|------|------|------|------|
| `[physical attack]` | 物理攻击力 | 百分比 | `[physical attack] 120.0` |
| `[magical attack]` | 魔法攻击力 | 百分比 | `[magical attack] 100.0` |
| `[attack range]` | 攻击范围 | 像素 | `[attack range] 200.0` |
| `[attack count]` | 攻击次数 | 数值 | `[attack count] 3` |

### 命中效果 [hit info]

| 标签 | 说明 | 可选值 | 示例 |
|------|------|--------|------|
| `[blow]` | 击飞效果 | 0=否, 1=是 | `[blow] 1` |
| `[blood]` | 流血效果 | 0=否, 1=是 | `[blood] 1` |
| `[stun]` | 眩晕效果 | 0=否, 1=是 | `[stun] 1` |
| `[freeze]` | 冰冻效果 | 0=否, 1=是 | `[freeze] 1` |
| `[shock]` | 感电效果 | 0=否, 1=是 | `[shock] 1` |
| `[poison]` | 中毒效果 | 0=否, 1=是 | `[poison] 1` |
| `[burn]` | 灼烧效果 | 0=否, 1=是 | `[burn] 1` |
| `[curse]` | 诅咒效果 | 0=否, 1=是 | `[curse] 1` |
| `[slow]` | 减速效果 | 0=否, 1=是 | `[slow] 1` |
| `[critical]` | 必定暴击 | 0=否, 1=是 | `[critical] 1` |

### 元素属性

| 标签 | 说明 | 可选值 | 示例 |
|------|------|--------|------|
| `[element]` | 元素类型 | 0=无, 1=火, 2=雷, 3=冰, 4=光, 5=暗 | `[element] 2` |
| `[element damage]` | 元素伤害 | 数值 | `[element damage] 50` |

### 时间控制

| 标签 | 说明 | 单位 | 示例 |
|------|------|------|------|
| `[hit recovery]` | 硬直时间 | 毫秒 | `[hit recovery] 800` |
| `[duration]` | 持续时间 | 毫秒 | `[duration] 5000` |

## 特殊效果标签 [special effect]

### 防御和保护

| 标签 | 说明 | 格式 | 示例 |
|------|------|------|------|
| `[invincible]` | 无敌时间 | 毫秒 | `[invincible] 1000` |
| `[super armor]` | 霸体效果 | 0=否, 1=是 | `[super armor] 1` |
| `[ignore defense]` | 无视防御 | 百分比 | `[ignore defense] 50` |

### 攻击特性

| 标签 | 说明 | 格式 | 示例 |
|------|------|------|------|
| `[penetrate]` | 穿透效果 | 0=否, 1=是 | `[penetrate] 1` |
| `[bounce]` | 弹射效果 | 次数 | `[bounce] 3` |
| `[chain]` | 连锁效果 | 次数 | `[chain] 2` |
| `[splash]` | 溅射效果 | 范围 | `[splash] 100` |
| `[multi_hit]` | 多重命中 | 次数 | `[multi_hit] 5` |

### 概率效果

| 标签 | 说明 | 单位 | 示例 |
|------|------|------|------|
| `[critical_rate]` | 暴击率 | 百分比 | `[critical_rate] 30` |
| `[stun_probability]` | 眩晕概率 | 百分比 | `[stun_probability] 25` |
| `[freeze_probability]` | 冰冻概率 | 百分比 | `[freeze_probability] 20` |
| `[shock_probability]` | 感电概率 | 百分比 | `[shock_probability] 30` |

## 范围攻击标签 [area attack]

| 标签 | 说明 | 单位 | 示例 |
|------|------|------|------|
| `[width]` | 攻击宽度 | 像素 | `[width] 200` |
| `[height]` | 攻击高度 | 像素 | `[height] 150` |
| `[depth]` | 攻击深度 | 像素 | `[depth] 300` |

## 动画和效果标签

### 动画文件 [animation]

| 标签 | 说明 | 格式 | 示例 |
|------|------|------|------|
| `[cast]` | 施法动画 | 路径 | `[cast] \`skill/cast.ani\`` |
| `[attack]` | 攻击动画 | 路径 | `[attack] \`skill/attack.ani\`` |
| `[effect]` | 特效动画 | 路径 | `[effect] \`skill/effect.ani\`` |
| `[hit_effect]` | 命中特效 | 路径 | `[hit_effect] \`skill/hit.ani\`` |

### 音效文件 [sound effect]

| 标签 | 说明 | 格式 | 示例 |
|------|------|------|------|
| `[cast]` | 施法音效 | 音效名 | `[cast] \`SKILL_CAST\`` |
| `[attack]` | 攻击音效 | 音效名 | `[attack] \`SKILL_ATTACK\`` |
| `[hit]` | 命中音效 | 音效名 | `[hit] \`SKILL_HIT\`` |

### 粒子效果 [particle effect]

| 标签 | 说明 | 格式 | 示例 |
|------|------|------|------|
| `[fire]` | 火焰粒子 | 路径 | `[fire] \`effect/fire.ptl\`` |
| `[lightning]` | 闪电粒子 | 路径 | `[lightning] \`effect/lightning.ptl\`` |
| `[ice]` | 冰霜粒子 | 路径 | `[ice] \`effect/ice.ptl\`` |

## 觉醒技能专用标签

| 标签 | 说明 | 可选值 | 示例 |
|------|------|--------|------|
| `[awaken skill]` | 觉醒技能标记 | 0=否, 1=是 | `[awaken skill] 1` |
| `[awaken type]` | 觉醒类型 | 1=一觉, 2=二觉 | `[awaken type] 1` |
| `[awaken level]` | 觉醒等级要求 | 数值 | `[awaken level] 48` |

## 自定义技能标签

| 标签 | 说明 | 格式 | 示例 |
|------|------|------|------|
| `[custom skill]` | 自定义技能标记 | 0=否, 1=是 | `[custom skill] 1` |
| `[skill id]` | 自定义技能ID | 数值 | `[skill id] 99001` |

## 职业ID对照表

| 职业ID | 职业名称 | 英文名 |
|--------|----------|--------|
| 0 | 鬼剑士 | Swordman |
| 1 | 剑魂 | WeaponMaster |
| 2 | 鬼泣 | SoulBender |
| 3 | 狂战士 | Berserker |
| 4 | 阿修罗 | Asura |
| 5 | 征服者 | DarkTemplar |
| 10 | 格斗家(女) | Fighter |
| 11 | 散打 | Striker |
| 12 | 街霸 | Grappler |
| 13 | 柔道家 | Judo |
| 14 | 气功师 | NenMaster |

## 元素类型对照表

| 元素ID | 元素名称 | 颜色 | 特效 |
|--------|----------|------|------|
| 0 | 无属性 | 白色 | 普通 |
| 1 | 火属性 | 红色 | 灼烧 |
| 2 | 雷属性 | 黄色 | 感电 |
| 3 | 冰属性 | 蓝色 | 冰冻 |
| 4 | 光属性 | 金色 | 净化 |
| 5 | 暗属性 | 紫色 | 诅咒 |

## 常用数值范围

### 伤害类

- **物理攻击力**: 50.0 - 2000.0 (百分比)
- **魔法攻击力**: 50.0 - 2000.0 (百分比)
- **元素伤害**: 10 - 500 (固定值)

### 时间类

- **冷却时间**: 1000 - 60000 毫秒 (1秒 - 60秒)
- **施法时间**: 100 - 3000 毫秒 (0.1秒 - 3秒)
- **硬直时间**: 200 - 5000 毫秒 (0.2秒 - 5秒)
- **持续时间**: 1000 - 30000 毫秒 (1秒 - 30秒)

### 范围类

- **攻击范围**: 50 - 800 像素
- **攻击宽度**: 50 - 500 像素
- **攻击高度**: 50 - 300 像素

### 概率类

- **状态效果概率**: 5 - 100 百分比
- **暴击率**: 5 - 100 百分比
- **无视防御**: 10 - 100 百分比

## 格式规范

### 字符串格式

```
[name] `技能名称`          // 正确：使用反引号
[name] "技能名称"          // 错误：不要使用双引号
```

### 缩进格式

```
[skill]
	[basic info]           // 正确：使用Tab缩进
		[skill type] 0     // 正确：嵌套使用Tab缩进
	[/basic info]
[/skill]
```

### 注释格式

```
[skill type] 0             // 行尾注释
// 这是完整行注释
[maximum level] 60         // 技能最大等级
```

## 常见错误

### 1. 字符串格式错误
```
// 错误
[name] "技能名称"

// 正确
[name] `技能名称`
```

### 2. 缩进错误
```
// 错误：使用空格
[skill]
    [basic info]

// 正确：使用Tab
[skill]
	[basic info]
```

### 3. 数值范围错误
```
// 错误：超出合理范围
[physical attack] 10000.0

// 正确：合理范围
[physical attack] 150.0
```

### 4. 标签嵌套错误
```
// 错误：标签未正确闭合
[skill]
	[basic info]
		[skill type] 0
	// 缺少 [/basic info]
[/skill]

// 正确：标签正确闭合
[skill]
	[basic info]
		[skill type] 0
	[/basic info]
[/skill]
```

## 最佳实践

1. **保持一致性**: 使用统一的命名和格式规范
2. **合理数值**: 确保数值在合理范围内，保持游戏平衡
3. **完整注释**: 为重要参数添加注释说明
4. **测试验证**: 修改后进行充分测试
5. **备份原文件**: 修改前备份原始文件
6. **渐进修改**: 一次修改少量参数，便于定位问题

## 相关文档

- [技能系统概述](./技能系统概述.md)
- [示例文件](./示例文件/)
- [职业技能参考](./职业技能参考/)
- [问题解答](./问题解答.md)