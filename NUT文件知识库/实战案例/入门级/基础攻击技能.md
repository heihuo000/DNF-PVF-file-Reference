# åŸºç¡€æ”»å‡»æŠ€èƒ½å®æˆ˜æ¡ˆä¾‹

## ğŸ“– æ¡ˆä¾‹æ¦‚è¿°

æœ¬æ¡ˆä¾‹æ¼”ç¤ºå¦‚ä½•åˆ›å»ºä¸€ä¸ªæœ€åŸºç¡€çš„ä¸»åŠ¨æ”»å‡»æŠ€èƒ½ï¼ŒåŒ…å«å®Œæ•´çš„æŠ€èƒ½æµç¨‹ï¼šæ–½æ³•å‰æ‘‡ã€æ”»å‡»åˆ¤å®šã€ä¼¤å®³è®¡ç®—ã€æ–½æ³•åæ‘‡ã€‚è¿™æ˜¯å­¦ä¹ NUTè„šæœ¬çš„ç¬¬ä¸€æ­¥ï¼ŒæŒæ¡äº†åŸºç¡€æ”»å‡»æŠ€èƒ½çš„å®ç°ï¼Œå°±èƒ½ç†è§£NUTè„šæœ¬çš„æ ¸å¿ƒå·¥ä½œåŸç†ã€‚

## ğŸ¯ å­¦ä¹ ç›®æ ‡

- ç†è§£NUTè„šæœ¬çš„åŸºæœ¬ç»“æ„
- æŒæ¡æŠ€èƒ½çŠ¶æ€çš„åˆ‡æ¢æµç¨‹
- å­¦ä¼šåŸºç¡€çš„æ”»å‡»åˆ¤å®šå®ç°
- äº†è§£ä¼¤å®³è®¡ç®—çš„åŸºæœ¬æ–¹æ³•
- ç†Ÿæ‚‰å¸¸ç”¨çš„NUTå‡½æ•°è°ƒç”¨

## ğŸ“‹ æŠ€èƒ½éœ€æ±‚

**æŠ€èƒ½åç§°ï¼š** åŸºç¡€æ–©å‡»  
**æŠ€èƒ½ç±»å‹ï¼š** ä¸»åŠ¨æ”»å‡»æŠ€èƒ½  
**æ–½æ³•æ—¶é—´ï¼š** 0.3ç§’å‰æ‘‡ + 0.2ç§’åæ‘‡  
**æ”»å‡»èŒƒå›´ï¼š** å‰æ–¹200åƒç´ çŸ©å½¢åŒºåŸŸ  
**ä¼¤å®³å€ç‡ï¼š** 150%ç‰©ç†æ”»å‡»åŠ›  
**å†·å´æ—¶é—´ï¼š** 3ç§’  

## ğŸ”§ å®Œæ•´å®ç°

### æŠ€èƒ½ä¸»æ–‡ä»¶ (skill_basic_attack.nut)

```nut
// =====================================
// åŸºç¡€æ–©å‡»æŠ€èƒ½ - å®Œæ•´å®ç°
// ä½œè€…ï¼šNUTè„šæœ¬æ•™ç¨‹
// ç‰ˆæœ¬ï¼š1.0
// =====================================

// æŠ€èƒ½é…ç½®å¸¸é‡
const SKILL_ID = 1001;                    // æŠ€èƒ½ID
const CAST_TIME = 300;                    // æ–½æ³•æ—¶é—´(æ¯«ç§’)
const RECOVERY_TIME = 200;                // åæ‘‡æ—¶é—´(æ¯«ç§’)
const ATTACK_RANGE_X = 200;               // æ”»å‡»èŒƒå›´X
const ATTACK_RANGE_Y = 100;               // æ”»å‡»èŒƒå›´Y
const DAMAGE_RATE = 1.5;                  // ä¼¤å®³å€ç‡
const COOLDOWN_TIME = 3000;               // å†·å´æ—¶é—´(æ¯«ç§’)

// =====================================
// æŠ€èƒ½æ£€æŸ¥å‡½æ•° - åˆ¤æ–­æ˜¯å¦å¯ä»¥é‡Šæ”¾æŠ€èƒ½
// =====================================
function checkExecutableSkill_BasicAttack(obj)
{
    // æ£€æŸ¥å¯¹è±¡æœ‰æ•ˆæ€§
    if (!obj || obj.isObjectType(OBJECTTYPE_ACTIVE) == false)
        return false;
    
    // æ£€æŸ¥è§’è‰²çŠ¶æ€ - ä¸èƒ½åœ¨åƒµç›´ã€æµ®ç©ºã€å€’åœ°æ—¶é‡Šæ”¾
    if (obj.getState() == STATE_STUN || 
        obj.getState() == STATE_FLOAT || 
        obj.getState() == STATE_DOWN)
        return false;
    
    // æ£€æŸ¥MPæ¶ˆè€— (å‡è®¾æ¶ˆè€—20MP)
    if (obj.getMp() < 20)
        return false;
    
    // æ£€æŸ¥æŠ€èƒ½å†·å´
    if (obj.isSkillCoolTime(SKILL_ID) == true)
        return false;
    
    return true;  // æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼Œå¯ä»¥é‡Šæ”¾æŠ€èƒ½
}

// =====================================
// æŠ€èƒ½é‡Šæ”¾å‡½æ•° - æŠ€èƒ½çš„ä¸»è¦é€»è¾‘å…¥å£
// =====================================
function onSetSkill_BasicAttack(obj, skillIndex, datas)
{
    // éªŒè¯å¯¹è±¡æœ‰æ•ˆæ€§
    if (!obj) return;
    
    // æ¶ˆè€—MP
    obj.addMp(-20);
    
    // è®¾ç½®æŠ€èƒ½å†·å´
    obj.setSkillCoolTime(SKILL_ID, COOLDOWN_TIME);
    
    // è¿›å…¥æ–½æ³•çŠ¶æ€
    obj.setState(STATE_SKILL);
    
    // æ’­æ”¾æ–½æ³•åŠ¨ç”» (å‡è®¾åŠ¨ç”»åºåˆ—ä¸º0)
    obj.setCurrentAnimation(0);
    
    // è®¾ç½®æ–½æ³•æ—¶é—´
    obj.setCurrentSkillPhase(0);  // ç¬¬0é˜¶æ®µï¼šæ–½æ³•å‰æ‘‡
    obj.setSkillPhaseStartTime(getTimer());
    
    // åˆ›å»ºæŠ€èƒ½æ•°æ®å­˜å‚¨
    local skillData = {
        startTime = getTimer(),           // æŠ€èƒ½å¼€å§‹æ—¶é—´
        phase = 0,                       // å½“å‰é˜¶æ®µ (0:å‰æ‘‡, 1:æ”»å‡», 2:åæ‘‡)
        hasAttacked = false              // æ˜¯å¦å·²ç»è¿›è¡Œæ”»å‡»åˆ¤å®š
    };
    
    // å°†æ•°æ®å­˜å‚¨åˆ°è§’è‰²å¯¹è±¡ä¸­
    obj.setData("BasicAttack_Data", skillData);
    
    // æ’­æ”¾æ–½æ³•éŸ³æ•ˆ
    obj.playSound("skill_cast.wav");
}

// =====================================
// æŠ€èƒ½çŠ¶æ€æ›´æ–°å‡½æ•° - æ¯å¸§è°ƒç”¨
// =====================================
function onSetState_BasicAttack(obj, state, datas, isResetTimer)
{
    // åªå¤„ç†æŠ€èƒ½çŠ¶æ€
    if (state != STATE_SKILL) return;
    
    // è·å–æŠ€èƒ½æ•°æ®
    local skillData = obj.getData("BasicAttack_Data");
    if (!skillData) return;
    
    local currentTime = getTimer();
    local elapsedTime = currentTime - skillData.startTime;
    
    // æ ¹æ®å½“å‰é˜¶æ®µå¤„ç†ä¸åŒé€»è¾‘
    switch (skillData.phase)
    {
        case 0:  // æ–½æ³•å‰æ‘‡é˜¶æ®µ
            handleCastPhase(obj, skillData, elapsedTime);
            break;
            
        case 1:  // æ”»å‡»åˆ¤å®šé˜¶æ®µ
            handleAttackPhase(obj, skillData, elapsedTime);
            break;
            
        case 2:  // æ–½æ³•åæ‘‡é˜¶æ®µ
            handleRecoveryPhase(obj, skillData, elapsedTime);
            break;
    }
}

// =====================================
// æ–½æ³•å‰æ‘‡é˜¶æ®µå¤„ç†
// =====================================
function handleCastPhase(obj, skillData, elapsedTime)
{
    // æ£€æŸ¥æ˜¯å¦å®Œæˆæ–½æ³•å‰æ‘‡
    if (elapsedTime >= CAST_TIME)
    {
        // è¿›å…¥æ”»å‡»é˜¶æ®µ
        skillData.phase = 1;
        
        // åˆ‡æ¢åˆ°æ”»å‡»åŠ¨ç”» (å‡è®¾åŠ¨ç”»åºåˆ—ä¸º1)
        obj.setCurrentAnimation(1);
        
        // æ’­æ”¾æ”»å‡»éŸ³æ•ˆ
        obj.playSound("skill_attack.wav");
        
        // ç«‹å³è¿›è¡Œæ”»å‡»åˆ¤å®š
        performAttack(obj);
        skillData.hasAttacked = true;
    }
}

// =====================================
// æ”»å‡»åˆ¤å®šé˜¶æ®µå¤„ç†
// =====================================
function handleAttackPhase(obj, skillData, elapsedTime)
{
    // æ”»å‡»é˜¶æ®µå¾ˆçŸ­ï¼Œä¸»è¦æ˜¯æ’­æ”¾æ”»å‡»åŠ¨ç”»
    // å®é™…æ”»å‡»åˆ¤å®šåœ¨è¿›å…¥æ­¤é˜¶æ®µæ—¶å°±å®Œæˆäº†
    
    // æ£€æŸ¥æ˜¯å¦è¿›å…¥åæ‘‡é˜¶æ®µ (æ”»å‡»åç«‹å³è¿›å…¥åæ‘‡)
    if (elapsedTime >= CAST_TIME + 50)  // æ”»å‡»é˜¶æ®µæŒç»­50æ¯«ç§’
    {
        skillData.phase = 2;
        
        // åˆ‡æ¢åˆ°åæ‘‡åŠ¨ç”» (å‡è®¾åŠ¨ç”»åºåˆ—ä¸º2)
        obj.setCurrentAnimation(2);
    }
}

// =====================================
// æ–½æ³•åæ‘‡é˜¶æ®µå¤„ç†
// =====================================
function handleRecoveryPhase(obj, skillData, elapsedTime)
{
    // æ£€æŸ¥æ˜¯å¦å®Œæˆæ•´ä¸ªæŠ€èƒ½
    if (elapsedTime >= CAST_TIME + 50 + RECOVERY_TIME)
    {
        // æŠ€èƒ½ç»“æŸï¼Œè¿”å›æ­£å¸¸çŠ¶æ€
        obj.setState(STATE_NORMAL);
        
        // æ¸…ç†æŠ€èƒ½æ•°æ®
        obj.setData("BasicAttack_Data", null);
        
        // æ¢å¤é»˜è®¤åŠ¨ç”»
        obj.setCurrentAnimation(-1);  // -1è¡¨ç¤ºé»˜è®¤åŠ¨ç”»
    }
}

// =====================================
// æ”»å‡»åˆ¤å®šå‡½æ•° - æ ¸å¿ƒæ”»å‡»é€»è¾‘
// =====================================
function performAttack(obj)
{
    // è·å–è§’è‰²ä½ç½®å’Œæœå‘
    local x = obj.getXPos();
    local y = obj.getYPos();
    local z = obj.getZPos();
    local direction = obj.getDirection();  // 0=å³, 1=å·¦
    
    // è®¡ç®—æ”»å‡»åŒºåŸŸ
    local attackX = x;
    local attackY = y;
    
    // æ ¹æ®æœå‘è°ƒæ•´æ”»å‡»ä½ç½®
    if (direction == 0)  // é¢å‘å³
        attackX += ATTACK_RANGE_X / 2;
    else  // é¢å‘å·¦
        attackX -= ATTACK_RANGE_X / 2;
    
    // åˆ›å»ºæ”»å‡»åŒºåŸŸ
    local attackArea = sq_CreateDrawOnlyObject(obj, "character/swordman/effect/basicattack.ani", 
                                               LAYER_BOTTOM, true);
    if (attackArea)
    {
        // è®¾ç½®æ”»å‡»åŒºåŸŸä½ç½®
        attackArea.setXPos(attackX);
        attackArea.setYPos(attackY);
        attackArea.setZPos(z);
        
        // è®¾ç½®æ”»å‡»åŒºåŸŸå¤§å°
        attackArea.setSize(ATTACK_RANGE_X, ATTACK_RANGE_Y, 50);
        
        // è®¾ç½®æ”»å‡»å±æ€§
        setupAttackProperties(obj, attackArea);
        
        // è®¾ç½®æ”»å‡»åŒºåŸŸç”Ÿå­˜æ—¶é—´ (100æ¯«ç§’)
        attackArea.setTimeEvent(0, 100, 1, false);
    }
    
    // æŸ¥æ‰¾æ”»å‡»èŒƒå›´å†…çš„æ•Œäºº
    local enemies = sq_GetObjectsInRange(obj, attackX, attackY, z, 
                                        ATTACK_RANGE_X, ATTACK_RANGE_Y, 50);
    
    // å¯¹æ¯ä¸ªæ•Œäººé€ æˆä¼¤å®³
    foreach (enemy in enemies)
    {
        if (isValidTarget(obj, enemy))
        {
            dealDamageToEnemy(obj, enemy);
        }
    }
}

// =====================================
// è®¾ç½®æ”»å‡»å±æ€§
// =====================================
function setupAttackProperties(attacker, attackArea)
{
    // è®¾ç½®æ”»å‡»è€…
    attackArea.setAttacker(attacker);
    
    // è®¾ç½®æ”»å‡»ç±»å‹ä¸ºç‰©ç†æ”»å‡»
    attackArea.setAttackType(ATTACKTYPE_PHYSICAL);
    
    // è®¾ç½®å…ƒç´ å±æ€§ä¸ºæ— å±æ€§
    attackArea.setElementType(ELEMENT_NONE);
    
    // è®¾ç½®æ”»å‡»ç­‰çº§ (å½±å“å‘½ä¸­ç‡)
    attackArea.setAttackLevel(attacker.getLevel());
    
    // è®¾ç½®æš´å‡»ç‡
    attackArea.setCriticalRate(attacker.getCriticalRate());
    
    // è®¾ç½®æ”»å‡»åŠ›
    local damage = attacker.getPhysicalAttack() * DAMAGE_RATE;
    attackArea.setDamage(damage.tointeger());
}

// =====================================
// éªŒè¯æ”»å‡»ç›®æ ‡
// =====================================
function isValidTarget(attacker, target)
{
    // æ£€æŸ¥ç›®æ ‡æœ‰æ•ˆæ€§
    if (!target || target == attacker)
        return false;
    
    // æ£€æŸ¥ç›®æ ‡æ˜¯å¦ä¸ºæ•Œäºº
    if (target.getTeam() == attacker.getTeam())
        return false;
    
    // æ£€æŸ¥ç›®æ ‡æ˜¯å¦å­˜æ´»
    if (target.getHp() <= 0)
        return false;
    
    // æ£€æŸ¥ç›®æ ‡æ˜¯å¦åœ¨æ— æ•ŒçŠ¶æ€
    if (target.isInvincible())
        return false;
    
    return true;
}

// =====================================
// å¯¹æ•Œäººé€ æˆä¼¤å®³
// =====================================
function dealDamageToEnemy(attacker, enemy)
{
    // è®¡ç®—æœ€ç»ˆä¼¤å®³
    local baseDamage = attacker.getPhysicalAttack() * DAMAGE_RATE;
    local finalDamage = calculateFinalDamage(attacker, enemy, baseDamage);
    
    // é€ æˆä¼¤å®³
    enemy.addHp(-finalDamage);
    
    // æ˜¾ç¤ºä¼¤å®³æ•°å­—
    enemy.showDamage(finalDamage, DAMAGE_TYPE_PHYSICAL);
    
    // æ’­æ”¾å—å‡»éŸ³æ•ˆ
    enemy.playSound("hit_sound.wav");
    
    // æ·»åŠ å—å‡»æ•ˆæœ
    addHitEffect(enemy);
    
    // æ£€æŸ¥æ˜¯å¦å‡»æ€
    if (enemy.getHp() <= 0)
    {
        // æ’­æ”¾å‡»æ€éŸ³æ•ˆ
        attacker.playSound("kill_sound.wav");
        
        // ç»™æ”»å‡»è€…åŠ ç»éªŒ
        attacker.addExp(enemy.getLevel() * 10);
    }
}

// =====================================
// è®¡ç®—æœ€ç»ˆä¼¤å®³ (è€ƒè™‘é˜²å¾¡ã€æŠ—æ€§ç­‰)
// =====================================
function calculateFinalDamage(attacker, target, baseDamage)
{
    // è·å–ç›®æ ‡é˜²å¾¡åŠ›
    local defense = target.getPhysicalDefense();
    
    // ç®€å•çš„ä¼¤å®³è®¡ç®—å…¬å¼
    local finalDamage = baseDamage * 100 / (100 + defense);
    
    // éšæœºæµ®åŠ¨ (Â±10%)
    local randomFactor = 0.9 + (rand() % 21) * 0.01;  // 0.9 ~ 1.1
    finalDamage *= randomFactor;
    
    // ç¡®ä¿æœ€å°ä¼¤å®³ä¸º1
    if (finalDamage < 1)
        finalDamage = 1;
    
    return finalDamage.tointeger();
}

// =====================================
// æ·»åŠ å—å‡»ç‰¹æ•ˆ
// =====================================
function addHitEffect(target)
{
    // åˆ›å»ºå—å‡»ç‰¹æ•ˆ
    local hitEffect = sq_CreateDrawOnlyObject(target, "character/common/effect/hit.ani", 
                                             LAYER_TOP, true);
    if (hitEffect)
    {
        // è®¾ç½®ç‰¹æ•ˆä½ç½®
        hitEffect.setXPos(target.getXPos());
        hitEffect.setYPos(target.getYPos() + 50);  // ç¨å¾®åä¸Š
        hitEffect.setZPos(target.getZPos());
        
        // è®¾ç½®ç‰¹æ•ˆç”Ÿå­˜æ—¶é—´
        hitEffect.setTimeEvent(0, 300, 1, false);  // 300æ¯«ç§’åæ¶ˆå¤±
    }
    
    // æ·»åŠ å±å¹•éœ‡åŠ¨æ•ˆæœ
    sq_ShakeScreen(target, 100, 5, 5);  // éœ‡åŠ¨100æ¯«ç§’ï¼Œå¼ºåº¦5x5
}

// =====================================
// æŠ€èƒ½ä¸­æ–­å¤„ç†
// =====================================
function onEndCurrentAni_BasicAttack(obj)
{
    // å½“åŠ¨ç”»è¢«å¼ºåˆ¶ä¸­æ–­æ—¶è°ƒç”¨
    // æ¸…ç†æŠ€èƒ½æ•°æ®ï¼Œé¿å…çŠ¶æ€å¼‚å¸¸
    
    local skillData = obj.getData("BasicAttack_Data");
    if (skillData)
    {
        obj.setData("BasicAttack_Data", null);
        obj.setState(STATE_NORMAL);
    }
}

// =====================================
// å…³é”®å¸§äº‹ä»¶å¤„ç† (å¯é€‰)
// =====================================
function onKeyFrameFlag_BasicAttack(obj, flagIndex)
{
    // å½“åŠ¨ç”»æ’­æ”¾åˆ°ç‰¹å®šå…³é”®å¸§æ—¶è°ƒç”¨
    // å¯ä»¥ç”¨äºç²¾ç¡®æ§åˆ¶æ”»å‡»æ—¶æœº
    
    switch (flagIndex)
    {
        case 1:  // ç¬¬1ä¸ªå…³é”®å¸§ - æ”»å‡»åˆ¤å®š
            local skillData = obj.getData("BasicAttack_Data");
            if (skillData && !skillData.hasAttacked)
            {
                performAttack(obj);
                skillData.hasAttacked = true;
            }
            break;
            
        case 2:  // ç¬¬2ä¸ªå…³é”®å¸§ - æŠ€èƒ½ç»“æŸ
            obj.setState(STATE_NORMAL);
            obj.setData("BasicAttack_Data", null);
            break;
    }
}
```

## ğŸ“ ä»£ç è¯¦è§£

### 1. æŠ€èƒ½æ£€æŸ¥å‡½æ•°
```nut
function checkExecutableSkill_BasicAttack(obj)
```
- **ä½œç”¨ï¼š** åˆ¤æ–­è§’è‰²æ˜¯å¦å¯ä»¥é‡Šæ”¾æŠ€èƒ½
- **æ£€æŸ¥é¡¹ï¼š** è§’è‰²çŠ¶æ€ã€MPæ¶ˆè€—ã€æŠ€èƒ½å†·å´
- **è¿”å›å€¼ï¼š** trueè¡¨ç¤ºå¯ä»¥é‡Šæ”¾ï¼Œfalseè¡¨ç¤ºä¸å¯ä»¥

### 2. æŠ€èƒ½é‡Šæ”¾å‡½æ•°
```nut
function onSetSkill_BasicAttack(obj, skillIndex, datas)
```
- **ä½œç”¨ï¼š** æŠ€èƒ½é‡Šæ”¾æ—¶çš„åˆå§‹åŒ–é€»è¾‘
- **ä¸»è¦æ“ä½œï¼š** æ¶ˆè€—èµ„æºã€è®¾ç½®çŠ¶æ€ã€æ’­æ”¾åŠ¨ç”»ã€å­˜å‚¨æ•°æ®

### 3. çŠ¶æ€æ›´æ–°å‡½æ•°
```nut
function onSetState_BasicAttack(obj, state, datas, isResetTimer)
```
- **ä½œç”¨ï¼š** æ¯å¸§æ›´æ–°æŠ€èƒ½çŠ¶æ€
- **æ ¸å¿ƒé€»è¾‘ï¼š** æ ¹æ®æ—¶é—´å’Œé˜¶æ®µæ‰§è¡Œä¸åŒçš„å¤„ç†

### 4. æ”»å‡»åˆ¤å®šå‡½æ•°
```nut
function performAttack(obj)
```
- **ä½œç”¨ï¼š** æ‰§è¡Œå®é™…çš„æ”»å‡»åˆ¤å®šå’Œä¼¤å®³è®¡ç®—
- **ä¸»è¦æ­¥éª¤ï¼š** åˆ›å»ºæ”»å‡»åŒºåŸŸã€æŸ¥æ‰¾ç›®æ ‡ã€é€ æˆä¼¤å®³

## ğŸ® ä½¿ç”¨æ–¹æ³•

### 1. æ–‡ä»¶é…ç½®
å°†ä»£ç ä¿å­˜ä¸º `skill_basic_attack.nut` æ–‡ä»¶ï¼Œæ”¾ç½®åœ¨æŠ€èƒ½ç›®å½•ä¸‹ã€‚

### 2. æŠ€èƒ½é…ç½®æ–‡ä»¶
åœ¨å¯¹åº”çš„ `.skl` æ–‡ä»¶ä¸­æ·»åŠ ï¼š
```
[skill data]
	`skill_basic_attack.nut`
[/skill data]
```

### 3. åŠ¨ç”»é…ç½®
ç¡®ä¿ä»¥ä¸‹åŠ¨ç”»æ–‡ä»¶å­˜åœ¨ï¼š
- æ–½æ³•åŠ¨ç”»ï¼šåºåˆ—0
- æ”»å‡»åŠ¨ç”»ï¼šåºåˆ—1  
- åæ‘‡åŠ¨ç”»ï¼šåºåˆ—2

### 4. éŸ³æ•ˆé…ç½®
å‡†å¤‡ä»¥ä¸‹éŸ³æ•ˆæ–‡ä»¶ï¼š
- `skill_cast.wav` - æ–½æ³•éŸ³æ•ˆ
- `skill_attack.wav` - æ”»å‡»éŸ³æ•ˆ
- `hit_sound.wav` - å—å‡»éŸ³æ•ˆ
- `kill_sound.wav` - å‡»æ€éŸ³æ•ˆ

## ğŸ” å¸¸è§é—®é¢˜

### Q1: æŠ€èƒ½æ— æ³•é‡Šæ”¾ï¼Ÿ
**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
- `checkExecutableSkill_BasicAttack` å‡½æ•°æ˜¯å¦æ­£ç¡®å®ç°
- è§’è‰²çŠ¶æ€æ˜¯å¦æ­£å¸¸
- MPæ˜¯å¦è¶³å¤Ÿ
- æŠ€èƒ½æ˜¯å¦åœ¨å†·å´ä¸­

### Q2: æ”»å‡»æ²¡æœ‰ä¼¤å®³ï¼Ÿ
**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
- `performAttack` å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨
- æ”»å‡»èŒƒå›´è®¾ç½®æ˜¯å¦æ­£ç¡®
- ç›®æ ‡éªŒè¯é€»è¾‘æ˜¯å¦æœ‰é—®é¢˜
- ä¼¤å®³è®¡ç®—æ˜¯å¦æ­£ç¡®

### Q3: åŠ¨ç”»æ’­æ”¾å¼‚å¸¸ï¼Ÿ
**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
- åŠ¨ç”»æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- åŠ¨ç”»åºåˆ—å·æ˜¯å¦æ­£ç¡®
- çŠ¶æ€åˆ‡æ¢é€»è¾‘æ˜¯å¦æ­£ç¡®

### Q4: æŠ€èƒ½å¡æ­»ä¸ç»“æŸï¼Ÿ
**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
- æ—¶é—´è®¡ç®—æ˜¯å¦æ­£ç¡®
- çŠ¶æ€åˆ‡æ¢æ¡ä»¶æ˜¯å¦æ»¡è¶³
- æ˜¯å¦æ­£ç¡®æ¸…ç†æŠ€èƒ½æ•°æ®

## ğŸš€ æ‰©å±•å»ºè®®

### 1. æ·»åŠ æŠ€èƒ½ç­‰çº§
```nut
// æ ¹æ®æŠ€èƒ½ç­‰çº§è°ƒæ•´ä¼¤å®³
local skillLevel = obj.getSkillLevel(SKILL_ID);
local damage = attacker.getPhysicalAttack() * (DAMAGE_RATE + skillLevel * 0.1);
```

### 2. æ·»åŠ è¿å‡»ç³»ç»Ÿ
```nut
// æ£€æŸ¥è¿å‡»æ¬¡æ•°
local comboCount = obj.getData("ComboCount") || 0;
if (comboCount >= 3)
{
    // è§¦å‘ç‰¹æ®Šæ•ˆæœ
    performSpecialAttack(obj);
}
```

### 3. æ·»åŠ çŠ¶æ€æ•ˆæœ
```nut
// ç»™æ•Œäººæ·»åŠ å‡é€Ÿæ•ˆæœ
enemy.addState(STATE_SLOW, 2000);  // å‡é€Ÿ2ç§’
```

### 4. æ·»åŠ ç²’å­ç‰¹æ•ˆ
```nut
// åˆ›å»ºç²’å­ç‰¹æ•ˆ
local particle = sq_CreateParticle(obj, "effect/slash.ptl");
particle.setXPos(attackX);
particle.setYPos(attackY);
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æ ‡ç­¾å‚è€ƒ.md](../../æ ‡ç­¾å‚è€ƒ.md) - æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„NUTå‡½æ•°
- [é—®é¢˜è§£ç­”.md](../../é—®é¢˜è§£ç­”.md) - å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ
- [BUFFæŠ€èƒ½.md](./BUFFæŠ€èƒ½.md) - å­¦ä¹ çŠ¶æ€ç®¡ç†æŠ€å·§
- [å¤šæ®µæ”»å‡»æŠ€èƒ½.md](../è¿›é˜¶çº§/å¤šæ®µæ”»å‡»æŠ€èƒ½.md) - è¿›é˜¶æ”»å‡»æŠ€èƒ½å®ç°

---

*è¿™ä¸ªåŸºç¡€æ”»å‡»æŠ€èƒ½æ¡ˆä¾‹æ¶µç›–äº†NUTè„šæœ¬çš„æ ¸å¿ƒæ¦‚å¿µï¼Œæ˜¯å­¦ä¹ æ›´å¤æ‚æŠ€èƒ½çš„é‡è¦åŸºç¡€ã€‚å»ºè®®åå¤ç»ƒä¹ ï¼Œç›´åˆ°å®Œå…¨ç†è§£æ¯ä¸ªå‡½æ•°çš„ä½œç”¨å’Œè°ƒç”¨æ—¶æœºã€‚*