# ACT文件知识库

## 📖 简介

ACT文件是DNF游戏中的动作控制文件，负责定义角色、怪物、技能等的行为逻辑。本知识库提供了全面的ACT文件编写指南，从基础语法到高级应用，帮助开发者快速掌握ACT文件的编写技巧。

## 🚀 快速开始

### 第一步：了解基础概念
ACT文件主要控制以下几个方面：
- **动作表现** - 动画播放、音效触发
- **攻击判定** - 伤害计算、范围检测
- **AI行为** - 怪物智能、条件判断
- **特效创建** - 粒子效果、视觉反馈

### 第二步：掌握基本结构
```
[MOTION]                    // 动作定义
    [BASE ANI] `动画文件`
    [SOUND] `音效` 帧数
[/MOTION]

[DEFAULT ATTACKINFO] `攻击信息文件`

[TRIGGER]                   // 触发器
    [条件标签]
    [WHICH] [目标]
    [CHECKUP]
        [检查条件]
    [/CHECKUP]
    [DO BEHAVIOR] [目标] 行为编号
[/TRIGGER]

[BEHAVIOR]                  // 行为定义
    [具体行为内容]
[/BEHAVIOR]
```

### 第三步：注意格式规范
⚠️ **重要提醒**：
- 字符串必须使用反引号 `` ` `` 包围，不能用双引号 `""`
- 缩进必须使用Tab键，不能用空格
- 标签必须正确配对，注意开始和结束标签

## 📁 文件结构

```
ACT文件知识库/
├── README.md              # 本文件 - 快速入门指南
├── 标签参考.md            # 完整的标签参考文档
├── 依赖文件简介.md        # 文件间依赖关系说明
├── 问题解答.md            # 常见问题和解决方案
└── 示例文件/              # 实用模板和示例
    ├── 基础攻击动作.act   # 近战攻击模板
    ├── 远程攻击动作.act   # 远程射击模板
    ├── 技能施法动作.act   # 法师施法模板
    ├── 怪物AI行为.act     # 智能怪物模板
    └── BOSS特殊技能.act   # BOSS技能模板
```

## 🎯 学习路径推荐

### 新手入门路径
1. **阅读本README** - 了解基础概念和格式规范
2. **查看示例文件** - 从`基础攻击动作.act`开始学习
3. **参考标签文档** - 查阅`标签参考.md`了解具体标签用法
4. **实践练习** - 修改示例文件，观察效果变化
5. **解决问题** - 遇到问题时查看`问题解答.md`

### 进阶开发路径
1. **深入标签系统** - 掌握所有标签的高级用法
2. **理解依赖关系** - 学习ACT与其他文件的协作
3. **优化性能** - 学习高效的触发器设计
4. **复杂AI设计** - 创建智能的怪物行为
5. **特效系统** - 掌握粒子效果和视觉表现

### 专家级应用
1. **系统级设计** - 设计完整的技能系统
2. **性能调优** - 优化大型场景的ACT性能
3. **工具开发** - 创建ACT编辑和验证工具
4. **架构设计** - 设计可维护的ACT文件架构

## ⚡ 快速参考

### 常用标签速查
| 标签 | 功能 | 示例 |
|------|------|------|
| `[BASE ANI]` | 基础动画 | `[BASE ANI] \`../Animation/attack.ani\`` |
| `[SOUND]` | 音效播放 | `[SOUND] \`SWORD_SWING\` 5` |
| `[ON DAMAGE]` | 受伤触发 | 用于反击逻辑 |
| `[ON ATTACKSUCCESS]` | 攻击成功 | 用于连击系统 |
| `[WHICH] [TARGET]` | 选择目标 | 指定行为对象 |
| `[DISTANCE] [<=] 150` | 距离检查 | 范围判定 |
| `[CREATE PASSIVEOBJECT]` | 创建对象 | 子弹、特效等 |

### 常见错误速查
| 错误 | 原因 | 解决方案 |
|------|------|----------|
| 游戏崩溃 | 使用了双引号 | 改为反引号 `` ` `` |
| 缩进错误 | 使用了空格 | 改为Tab键 |
| 动画不播放 | 文件路径错误 | 检查路径是否正确 |
| 触发器不工作 | 条件设置错误 | 检查CHECKUP条件 |

## 🔧 开发工具

### 推荐工具
- **PVF MCP** - 官方PVF文件编辑器
- **文本编辑器** - 支持语法高亮的编辑器
- **格式检查工具** - 验证ACT文件格式

### 调试技巧
1. **分步测试** - 逐步添加功能，分别测试
2. **注释调试** - 注释部分代码定位问题
3. **对比参考** - 与正常工作的文件对比
4. **日志分析** - 查看游戏错误日志

## 📚 相关资源

### 知识库内部链接
- [标签参考文档](./标签参考.md) - 完整的标签说明
- [依赖关系说明](./依赖文件简介.md) - 文件间依赖关系
- [问题解答集](./问题解答.md) - 常见问题解决方案
- [示例文件夹](./示例文件/) - 实用模板和案例

### 外部参考资源
- [PVF文件格式规范](../PVF文件格式规范.md) - 通用格式规范
- [DNF文件知识库总览](../DNF文件知识库总览.md) - 整体架构
- [参考资料目录](../参考资料/) - 官方教程和样例

## 💡 重要提示

### 格式规范（必读）
```
✅ 正确格式：
[name] `血影·鬼切`
[MOTION]
	[BASE ANI] `../Animation/attack.ani`
[/MOTION]

❌ 错误格式：
[name] "血影·鬼切"          // 不能用双引号
[MOTION]
    [BASE ANI] `../Animation/attack.ani`  // 不能用空格缩进
[/MOTION]
```

### 性能注意事项
- 合理控制触发器数量，避免过度检查
- 限制同时存在的被动对象数量
- 使用`[LIMIT]`标签控制触发次数
- 设置合理的`[CHECK TIME]`间隔

### 兼容性提醒
- 确保引用的文件都存在
- 注意动画帧数与音效同步
- 测试不同场景下的表现
- 考虑与其他系统的兼容性

## 🤝 贡献指南

如果您发现文档中的错误或希望添加新的内容，请：
1. 检查现有文档是否已包含相关内容
2. 确保新增内容符合格式规范
3. 提供实际可用的示例代码
4. 遵循知识库的文档标准

## 📄 许可证

本知识库遵循开源许可证，欢迎学习和分享。

---

**开始您的ACT文件开发之旅吧！** 🎮

> 💡 **小贴士**：建议从`示例文件/基础攻击动作.act`开始学习，这是最简单的入门示例。

> ⚠️ **重要**：编写ACT文件时，请务必遵循格式规范，使用反引号和Tab缩进，避免游戏崩溃。