# MAPæ–‡ä»¶æ ‡ç­¾å‚è€ƒ

> ğŸ·ï¸ æ‰€æœ‰MAPæ ‡ç­¾çš„å®Œæ•´å‚è€ƒæ‰‹å†Œï¼ŒåŒ…å«åŠŸèƒ½è¯´æ˜ã€å‚æ•°è¯¦è§£å’Œå®ç”¨æ¡ˆä¾‹

## ğŸ“‹ ç›®å½•

- [åŸºç¡€ä¿¡æ¯æ ‡ç­¾](#åŸºç¡€ä¿¡æ¯æ ‡ç­¾)
- [åœ°å›¾å±æ€§æ ‡ç­¾](#åœ°å›¾å±æ€§æ ‡ç­¾)
- [ç“¦ç‰‡é…ç½®æ ‡ç­¾](#ç“¦ç‰‡é…ç½®æ ‡ç­¾)
- [ç§»åŠ¨åŒºåŸŸæ ‡ç­¾](#ç§»åŠ¨åŒºåŸŸæ ‡ç­¾)
- [éŸ³æ•ˆé…ç½®æ ‡ç­¾](#éŸ³æ•ˆé…ç½®æ ‡ç­¾)
- [åŠ¨ç”»é…ç½®æ ‡ç­¾](#åŠ¨ç”»é…ç½®æ ‡ç­¾)
- [å¯¹è±¡é…ç½®æ ‡ç­¾](#å¯¹è±¡é…ç½®æ ‡ç­¾)
- [æ€ªç‰©é…ç½®æ ‡ç­¾](#æ€ªç‰©é…ç½®æ ‡ç­¾)
- [ç‰¹æ®ŠåŠŸèƒ½æ ‡ç­¾](#ç‰¹æ®ŠåŠŸèƒ½æ ‡ç­¾)

---

## åŸºç¡€ä¿¡æ¯æ ‡ç­¾

### `[map info]`
**åŠŸèƒ½**: åœ°å›¾åŸºç¡€ä¿¡æ¯é…ç½®
**é€‚ç”¨**: æ‰€æœ‰åœ°å›¾ç±»å‹
**å¿…éœ€**: âœ…

```map
[map info]
	`map type`	`town`		// åœ°å›¾ç±»å‹: town(åŸé•‡) / dungeon(å‰¯æœ¬) / pvp(PVP)
	`width`		800		// åœ°å›¾å®½åº¦(åƒç´ )
	`height`	600		// åœ°å›¾é«˜åº¦(åƒç´ )
	`tile width`	32		// ç“¦ç‰‡å®½åº¦
	`tile height`	32		// ç“¦ç‰‡é«˜åº¦
	`map name`	`å¡åˆ©äºšæˆ¿é—´`	// åœ°å›¾æ˜¾ç¤ºåç§°
```

**å‚æ•°è¯´æ˜**:
- `map type`: å†³å®šåœ°å›¾çš„åŸºæœ¬è¡Œä¸ºå’Œå¯ç”¨åŠŸèƒ½
- `width/height`: åœ°å›¾çš„åƒç´ å°ºå¯¸ï¼Œå½±å“ç›¸æœºèŒƒå›´
- `tile width/height`: ç“¦ç‰‡å°ºå¯¸ï¼Œé€šå¸¸ä¸º32x32
- `map name`: æ¸¸æˆä¸­æ˜¾ç¤ºçš„åœ°å›¾åç§°

### `[layer info]`
**åŠŸèƒ½**: å›¾å±‚ä¿¡æ¯é…ç½®
**é€‚ç”¨**: æ‰€æœ‰åœ°å›¾ç±»å‹
**å¿…éœ€**: âœ…

```map
[layer info]
	`layer count`	3		// å›¾å±‚æ•°é‡
	`layer 0`	`back`		// èƒŒæ™¯å±‚
	`layer 1`	`tile`		// ç“¦ç‰‡å±‚
	`layer 2`	`obj`		// å¯¹è±¡å±‚
```

---

## åœ°å›¾å±æ€§æ ‡ç­¾

### `[map attribute]`
**åŠŸèƒ½**: åœ°å›¾å±æ€§å’Œè¡Œä¸ºé…ç½®
**é€‚ç”¨**: æ‰€æœ‰åœ°å›¾ç±»å‹
**å¿…éœ€**: âœ…

```map
[map attribute]
	`skill no effect`	0	// æŠ€èƒ½æ— æ•ˆæœ: 0(æ­£å¸¸) / 1(æ— æ•ˆ)
	`sound reverb`		0	// éŸ³æ•ˆæ··å“: 0-100
	`bgm`			`Music/town_seria.ogg`	// èƒŒæ™¯éŸ³ä¹æ–‡ä»¶
	`camera limit rect`	0	0	800	600	// ç›¸æœºé™åˆ¶åŒºåŸŸ
```

**å¸¸ç”¨é…ç½®**:
- **åŸé•‡åœ°å›¾**: `skill no effect` = 1 (ç¦ç”¨æŠ€èƒ½)
- **å‰¯æœ¬åœ°å›¾**: `skill no effect` = 0 (å…è®¸æŠ€èƒ½)
- **PVPåœ°å›¾**: éœ€è¦ç‰¹æ®Šçš„ç›¸æœºå’ŒéŸ³æ•ˆé…ç½®

### `[elemental property]`
**åŠŸèƒ½**: å…ƒç´ å±æ€§é…ç½®
**é€‚ç”¨**: å‰¯æœ¬åœ°å›¾
**å¿…éœ€**: âŒ

```map
[elemental property]
	`no effect`		0	// æ— å…ƒç´ æ•ˆæœ
	`water level`		0	// æ°´ä½é«˜åº¦
	`fire damage`		0	// ç«ç„°ä¼¤å®³
```

---

## ç“¦ç‰‡é…ç½®æ ‡ç­¾

### `[tile info]`
**åŠŸèƒ½**: ç“¦ç‰‡åŸºç¡€ä¿¡æ¯
**é€‚ç”¨**: æ‰€æœ‰åœ°å›¾ç±»å‹
**å¿…éœ€**: âœ…

```map
[tile info]
	`tile total`		100	// ç“¦ç‰‡æ€»æ•°
	`tile attribute`	`tile/town.til`	// ç“¦ç‰‡å±æ€§æ–‡ä»¶
	`tile image`		`tile/town.img`	// ç“¦ç‰‡å›¾åƒæ–‡ä»¶
```

### `[extended tile]`
**åŠŸèƒ½**: æ‰©å±•ç“¦ç‰‡é…ç½®
**é€‚ç”¨**: å¤æ‚åœ°å›¾
**å¿…éœ€**: âŒ

```map
[extended tile]
	`animation tile count`	5	// åŠ¨ç”»ç“¦ç‰‡æ•°é‡
	`animation tile 0`	10	20	30	// åŠ¨ç”»å¸§åºåˆ—
```

---

## ç§»åŠ¨åŒºåŸŸæ ‡ç­¾

### `[movable area]`
**åŠŸèƒ½**: å¯ç§»åŠ¨åŒºåŸŸå®šä¹‰
**é€‚ç”¨**: æ‰€æœ‰åœ°å›¾ç±»å‹
**å¿…éœ€**: âœ…

```map
[movable area]
	`area count`	1
	`area 0`	0	0	800	600	// x, y, width, height
```

### `[town movable area]`
**åŠŸèƒ½**: åŸé•‡ä¸“ç”¨ç§»åŠ¨åŒºåŸŸ
**é€‚ç”¨**: åŸé•‡åœ°å›¾
**å¿…éœ€**: âœ…

```map
[town movable area]
	`area count`	2
	`area 0`	100	100	200	150	// ä¸»è¦æ´»åŠ¨åŒºåŸŸ
	`area 1`	350	200	100	100	// æ¬¡è¦åŒºåŸŸ
```

### `[virtual movable area]`
**åŠŸèƒ½**: è™šæ‹Ÿç§»åŠ¨åŒºåŸŸ(ä¸å¯è§è¾¹ç•Œ)
**é€‚ç”¨**: æ‰€æœ‰åœ°å›¾ç±»å‹
**å¿…éœ€**: âŒ

```map
[virtual movable area]
	`area count`	1
	`area 0`	-50	-50	900	700	// æ‰©å±•è¾¹ç•Œ
```

---

## éŸ³æ•ˆé…ç½®æ ‡ç­¾

### `[sound]`
**åŠŸèƒ½**: ç¯å¢ƒéŸ³æ•ˆé…ç½®
**é€‚ç”¨**: æ‰€æœ‰åœ°å›¾ç±»å‹
**å¿…éœ€**: âŒ

```map
[sound]
	`sound count`	2
	`sound 0`	`Sound/town_ambient.ogg`	100	100	50	// æ–‡ä»¶, x, y, éŸ³é‡
	`sound 1`	`Sound/water_flow.ogg`		200	300	30
```

### `[opening bgm]`
**åŠŸèƒ½**: å¼€åœºèƒŒæ™¯éŸ³ä¹
**é€‚ç”¨**: å‰¯æœ¬åœ°å›¾
**å¿…éœ€**: âŒ

```map
[opening bgm]
	`file name`	`Music/dungeon_intro.ogg`
	`play time`	5000	// æ’­æ”¾æ—¶é•¿(æ¯«ç§’)
```

---

## åŠ¨ç”»é…ç½®æ ‡ç­¾

### `[animation]`
**åŠŸèƒ½**: åœ°å›¾åŠ¨ç”»é…ç½®
**é€‚ç”¨**: æ‰€æœ‰åœ°å›¾ç±»å‹
**å¿…éœ€**: âŒ

```map
[animation]
	`ani count`	1
	`ani 0`
		`ani file name`		`sprite/map_effect.ani`
		`ani pos`		400	300	// x, yåæ ‡
		`ani loop`		1	// æ˜¯å¦å¾ªç¯
		`ani play speed`	100	// æ’­æ”¾é€Ÿåº¦(%)
```

### `[background animation]`
**åŠŸèƒ½**: èƒŒæ™¯åŠ¨ç”»é…ç½®
**é€‚ç”¨**: æ‰€æœ‰åœ°å›¾ç±»å‹
**å¿…éœ€**: âŒ

```map
[background animation]
	`ani info count`	1
	`ani info 0`
		`file name`	`sprite/bg_clouds.ani`
		`pos`		0	0	800	600
		`loop`		1
		`speed`		50
```

---

## å¯¹è±¡é…ç½®æ ‡ç­¾

### `[passive object]`
**åŠŸèƒ½**: è¢«åŠ¨å¯¹è±¡é…ç½®(NPCã€è£…é¥°ç­‰)
**é€‚ç”¨**: æ‰€æœ‰åœ°å›¾ç±»å‹
**å¿…éœ€**: âŒ

```map
[passive object]
	`obj count`	2
	`obj 0`
		`file name`	`passiveobject/npc_seria.po`
		`pos`		400	300	// x, yåæ ‡
		`z pos`		0	// zè½´ä½ç½®
		`direction`	1	// æœå‘: 0(å·¦) / 1(å³)
	`obj 1`
		`file name`	`passiveobject/furniture_table.po`
		`pos`		200	250
		`z pos`		-10
```

**å¸¸ç”¨å¯¹è±¡ç±»å‹**:
- **NPC**: å•†åº—ã€ä»»åŠ¡ã€åŠŸèƒ½NPC
- **è£…é¥°**: å®¶å…·ã€æ¤ç‰©ã€å»ºç­‘è£…é¥°
- **åŠŸèƒ½**: ä¼ é€é—¨ã€æœºå…³ã€ç‰¹æ®Šè£…ç½®

---

## æ€ªç‰©é…ç½®æ ‡ç­¾

### `[monster]`
**åŠŸèƒ½**: æ€ªç‰©é…ç½®
**é€‚ç”¨**: å‰¯æœ¬åœ°å›¾
**å¿…éœ€**: âŒ

```map
[monster]
	`monster count`	3
	`monster 0`
		`file name`	`monster/goblin.mon`
		`pos`		300	200
		`level`		25
		`ai pattern`	`normal`
	`monster 1`
		`file name`	`monster/orc.mon`
		`pos`		500	300
		`level`		27
		`ai pattern`	`aggressive`
```

### `[monster condition]`
**åŠŸèƒ½**: æ€ªç‰©å‡ºç°æ¡ä»¶
**é€‚ç”¨**: å‰¯æœ¬åœ°å›¾
**å¿…éœ€**: âŒ

```map
[monster condition]
	`condition count`	1
	`condition 0`
		`monster index`	0	// å¯¹åº”monsterä¸­çš„ç´¢å¼•
		`appear condition`	`room_clear`	// å‡ºç°æ¡ä»¶
		`appear delay`		2000		// å»¶è¿Ÿæ—¶é—´(æ¯«ç§’)
```

### `[blood monster]`
**åŠŸèƒ½**: è¡€è…¥æ¨¡å¼æ€ªç‰©æ›¿æ¢
**é€‚ç”¨**: å‰¯æœ¬åœ°å›¾
**å¿…éœ€**: âŒ

```map
[blood monster]
	`replace count`	1
	`replace 0`
		`original`	`monster/goblin.mon`
		`blood`		`monster/goblin_blood.mon`
```

---

## ç‰¹æ®ŠåŠŸèƒ½æ ‡ç­¾

### `[pathgate pos]`
**åŠŸèƒ½**: ä¼ é€é—¨ä½ç½®é…ç½®
**é€‚ç”¨**: åŸé•‡åœ°å›¾
**å¿…éœ€**: âŒ

```map
[pathgate pos]
	`gate count`	2
	`gate 0`	100	500	`dungeon_entrance`	// x, y, ç›®æ ‡ID
	`gate 1`	700	500	`shop_area`
```

### `[dungeon start area]`
**åŠŸèƒ½**: å‰¯æœ¬èµ·å§‹åŒºåŸŸ
**é€‚ç”¨**: å‰¯æœ¬åœ°å›¾
**å¿…éœ€**: âœ…

```map
[dungeon start area]
	`area count`	1
	`area 0`	50	550	100	50	// x, y, width, height
```

### `[static player start pos]`
**åŠŸèƒ½**: ç©å®¶å›ºå®šèµ·å§‹ä½ç½®
**é€‚ç”¨**: æ‰€æœ‰åœ°å›¾ç±»å‹
**å¿…éœ€**: âŒ

```map
[static player start pos]
	`pos count`	4
	`pos 0`		100	500	// ç©å®¶1ä½ç½®
	`pos 1`		120	500	// ç©å®¶2ä½ç½®
	`pos 2`		140	500	// ç©å®¶3ä½ç½®
	`pos 3`		160	500	// ç©å®¶4ä½ç½®
```

### `[guild agit entrance info]`
**åŠŸèƒ½**: å…¬ä¼šåŸºåœ°å…¥å£ä¿¡æ¯
**é€‚ç”¨**: åŸé•‡åœ°å›¾
**å¿…éœ€**: âŒ

```map
[guild agit entrance info]
	`entrance count`	1
	`entrance 0`
		`pos`		400	300
		`size`		50	50
		`target map`	`guild_hall`
```

### `[far sight scroll]` / `[middle sight scroll]` / `[near sight scroll]`
**åŠŸèƒ½**: è§†é‡æ»šåŠ¨é…ç½®
**é€‚ç”¨**: å¤§å‹åœ°å›¾
**å¿…éœ€**: âŒ

```map
[far sight scroll]
	`scroll speed`	100	// æ»šåŠ¨é€Ÿåº¦
	`scroll range`	0	0	1600	1200	// æ»šåŠ¨èŒƒå›´

[middle sight scroll]
	`scroll speed`	150
	`scroll range`	0	0	800	600

[near sight scroll]
	`scroll speed`	200
	`scroll range`	0	0	400	300
```

---

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### 1. æ ‡ç­¾ç»„åˆä½¿ç”¨
```map
// åŸé•‡åœ°å›¾æ ‡å‡†ç»„åˆ
[map info] + [layer info] + [map attribute] + [town movable area] + [passive object]

// å‰¯æœ¬åœ°å›¾æ ‡å‡†ç»„åˆ  
[map info] + [layer info] + [map attribute] + [movable area] + [dungeon start area] + [monster]

// PVPåœ°å›¾æ ‡å‡†ç»„åˆ
[map info] + [layer info] + [map attribute] + [movable area] + [static player start pos]
```

### 2. æ€§èƒ½ä¼˜åŒ–å»ºè®®
- é™åˆ¶åŠ¨ç”»æ•°é‡ï¼Œé¿å…è¿‡å¤š`[animation]`æ ‡ç­¾
- åˆç†è®¾ç½®`[movable area]`ï¼Œé¿å…è¿‡å¤§åŒºåŸŸ
- éŸ³æ•ˆæ–‡ä»¶ä½¿ç”¨å‹ç¼©æ ¼å¼ï¼Œæ§åˆ¶æ–‡ä»¶å¤§å°

### 3. å¸¸è§é”™è¯¯é¿å…
- å­—ç¬¦ä¸²å¿…é¡»ç”¨åå¼•å· `` åŒ…å›´
- åæ ‡å€¼ä¸èƒ½è¶…å‡ºåœ°å›¾å°ºå¯¸
- æ–‡ä»¶è·¯å¾„ä½¿ç”¨æ­£æ–œæ  `/`
- æ ‡ç­¾å¿…é¡»æ­£ç¡®é…å¯¹å’Œç¼©è¿›

---

## ğŸ“š ç›¸å…³é“¾æ¥

- [æ¨¡æ¿æ–‡ä»¶](æ¨¡æ¿æ–‡ä»¶/) - æ ‡å‡†åœ°å›¾æ¨¡æ¿
- [å®é™…æ¡ˆä¾‹](å®é™…æ¡ˆä¾‹/) - å®Œæ•´ä½¿ç”¨ç¤ºä¾‹  
- [å¸¸è§é—®é¢˜.md](å¸¸è§é—®é¢˜.md) - é”™è¯¯æ’æŸ¥æŒ‡å—