# MOB文件依赖文件简介

## 📋 概述

MOB文件不是独立存在的，它依赖于多种其他文件类型来实现完整的怪物功能。本文档详细介绍这些依赖文件的作用、格式和使用方法。

---

## 🎬 动画文件 (.ani)

### 作用
定义怪物的各种动作动画，如待机、移动、攻击、受伤、死亡等。

### 文件位置
```
monster/[怪物名称]/[动作名称].ani
```

### 在MOB文件中的引用
```mob
[wait motion] `monster/goblin/wait.ani`        // 待机动画
[move motion] `monster/goblin/move.ani`        // 移动动画
[attack motion] `monster/goblin/attack.ani`    // 攻击动画
[damage motion] `monster/goblin/damage.ani`    // 受伤动画
[down motion] `monster/goblin/down.ani`        // 倒地动画
[overturn motion] `monster/goblin/overturn.ani` // 翻身动画
```

### 常用动画类型
- **wait** - 待机动画（循环播放）
- **move** - 移动动画（循环播放）
- **attack** - 攻击动画（单次播放）
- **damage** - 受伤动画（单次播放）
- **down** - 倒地动画（单次播放）
- **overturn** - 翻身动画（单次播放）
- **die** - 死亡动画（单次播放）
- **sit** - 坐下动画（特殊怪物使用）

### 注意事项
- 动画文件必须存在，否则怪物显示异常
- 动画帧数影响动作流畅度
- 攻击动画的帧数要与攻击延迟匹配

---

## ⚔️ 装备文件 (.equ)

### 作用
定义怪物装备的外观、属性和特效。

### 文件位置
```
equipment/monster/[装备名称].equ
```

### 在MOB文件中的引用
```mob
[equipment]
	`equipment/monster/goblin_sword.equ`    // 武器装备
	`equipment/monster/goblin_armor.equ`    // 护甲装备
	`equipment/monster/goblin_shield.equ`   // 盾牌装备
```

### 装备类型
- **武器** - 影响攻击动画和特效
- **护甲** - 改变怪物外观
- **饰品** - 添加特殊效果
- **特殊装备** - 独特的视觉效果

### 装备文件基本结构
```equ
[name] `哥布林之剑`
[grade] 1
[rarity] 0
[usable job] `[all]`
[attach type] `[weapon]`
[minimum level] 1
[physical attack] 100
[icon] `item/weapon/sword/goblin_sword.img`
[field image] `item/weapon/sword/goblin_sword.img`
```

---

## ✨ 特效文件 (.ptl)

### 作用
定义各种视觉特效，如死亡特效、攻击特效、光环等。

### 文件位置
```
passiveobject/[特效分类]/[特效名称].ptl
```

### 在MOB文件中的引用
```mob
[die effect] `passiveobject/monster/goblin_die.ptl`           // 死亡特效
[ready action effect] `passiveobject/monster/goblin_ready.ptl` // 准备动作特效
[aura effect] `passiveobject/monster/goblin_aura.ptl`         // 光环特效
```

### 特效类型
- **die effect** - 死亡时播放的特效
- **ready action effect** - 准备动作时的特效
- **aura effect** - 持续的光环特效
- **attack effect** - 攻击时的特效（在攻击信息中定义）

### 特效文件基本结构
```ptl
[name] `哥布林死亡特效`
[creation pos] 0 0 0
[move type] 1
[life time] 3000
[attach type] `[ground]`
[effect] `effect/monster/goblin_die.eff`
```

---

## 🔊 音效文件 (.wav, .ogg)

### 作用
为怪物的各种动作和状态提供音效支持。

### 在MOB文件中的引用
```mob
[speech on situation]
	[on attack] `GOBLIN_ATTACK_01`     // 攻击时音效
	[on damage] `GOBLIN_DAMAGE_01`     // 受伤时音效
	[on die] `GOBLIN_DIE_01`           // 死亡时音效

[hit info]
	[blow]
		[hit sound] `SWORD_HIT_01`     // 击中音效
```

### 音效类型
- **动作音效** - 攻击、移动、技能释放
- **状态音效** - 受伤、死亡、愤怒
- **环境音效** - 脚步声、呼吸声
- **击中音效** - 武器击中目标的声音

---

## 🖼️ 图像文件 (.img)

### 作用
提供怪物的头像、图标等静态图像。

### 在MOB文件中的引用
```mob
[face image] `monster/goblin/face.img`    // 怪物头像
```

### 图像类型
- **face image** - 怪物头像（用于UI显示）
- **icon** - 怪物图标
- **portrait** - 肖像图

---

## 📦 物品文件 (.itm)

### 作用
定义怪物掉落的物品。

### 在MOB文件中的引用
```mob
[item]
	[item category] `[common drop item]`
	[rare item drop rate] 10
	[gold drop rate] 100
```

### 掉落系统
- **common drop item** - 普通掉落物品
- **rare drop item** - 稀有掉落物品
- **unique drop item** - 独特掉落物品
- **gold** - 金币掉落

---

## 🎯 投射物文件 (.prj)

### 作用
定义远程攻击的投射物，如箭矢、魔法弹等。

### 在MOB文件中的引用
```mob
[throw attack info]
	[throw] `projectile/monster/goblin_arrow.prj`  // 投射物文件
	[throw sound] `BOW_SHOT_01`                    // 发射音效
	[throw speed] 800                              // 投射速度
```

### 投射物属性
- **速度** - 飞行速度
- **轨迹** - 飞行路径
- **特效** - 飞行和击中特效
- **伤害** - 投射物伤害

---

## 🏗️ 地图文件 (.map)

### 作用
定义怪物的生成位置和生成条件。

### 怪物生成设置
```map
[monster spawn]
	[monster] `monster/goblin/warrior.mob`
	[position] 100 200
	[spawn rate] 100
	[max count] 5
```

---

## 📊 数据表文件 (.lst)

### 作用
管理怪物的分类、等级、属性等数据。

### 相关数据表
- **monster.lst** - 怪物基础数据
- **level.lst** - 等级相关数据
- **item.lst** - 物品数据
- **skill.lst** - 技能数据

---

## 🔗 依赖关系图

```
MOB文件 (.mob)
├── 动画文件 (.ani) - 必需
│   ├── wait.ani
│   ├── move.ani
│   ├── attack.ani
│   └── damage.ani
├── 装备文件 (.equ) - 可选
│   ├── weapon.equ
│   └── armor.equ
├── 特效文件 (.ptl) - 可选
│   ├── die.ptl
│   └── aura.ptl
├── 音效文件 (.wav/.ogg) - 可选
│   ├── attack.wav
│   └── damage.wav
├── 图像文件 (.img) - 可选
│   └── face.img
├── 投射物文件 (.prj) - 远程攻击需要
│   └── arrow.prj
└── 数据表文件 (.lst) - 系统级
    ├── monster.lst
    └── item.lst
```

---

## 🛠️ 创建依赖文件的工具

### 推荐工具
1. **PVF编辑器** - 可视化编辑各种文件
2. **动画编辑器** - 创建和编辑.ani文件
3. **特效编辑器** - 创建和编辑.ptl文件
4. **音频编辑器** - 处理音效文件
5. **图像编辑器** - 创建图标和头像

### 文件格式转换
- 音频：WAV、OGG格式
- 图像：IMG格式（DNF专用）
- 动画：ANI格式（DNF专用）

---

## ⚠️ 注意事项

### 文件路径
- 所有路径都是相对于PVF根目录
- 路径分隔符使用正斜杠 `/`
- 路径区分大小写

### 文件命名
- 使用英文命名，避免中文
- 文件名不要包含特殊字符
- 保持命名的一致性

### 性能考虑
- 动画文件不要过大
- 特效文件要适度使用
- 音效文件要压缩合适

### 兼容性
- 确保所有依赖文件都存在
- 检查文件格式的正确性
- 测试在不同环境下的表现

---

## 📚 学习建议

1. **从简单开始** - 先学会基础的动画和特效
2. **参考官方文件** - 学习官方怪物的文件结构
3. **逐步完善** - 先实现基本功能，再添加特效
4. **测试验证** - 每次修改后都要测试效果
5. **备份重要文件** - 避免误操作导致文件丢失

---

*依赖文件的正确使用是创建优秀MOB文件的关键，建议在实际制作中多参考官方示例。*