# MOB文件标签参考

## 📋 标签分类概览

MOB文件标签按功能分为以下几大类：
- **基础信息**: 怪物的基本属性和外观
- **属性系统**: 等级、血量、攻防等数值属性
- **AI行为**: 怪物的智能行为和战斗逻辑
- **动画系统**: 各种动作和视觉效果
- **装备系统**: 外观装备和掉落物品
- **特殊功能**: 高级功能和特殊效果

---

## 🏷️ 基础信息标签

### [name] - 怪物名称
```
[name] `哥布林战士`
```
- **功能**: 定义怪物的显示名称
- **格式**: 字符串必须用反引号包围
- **注意**: 支持多语言，可使用字符串表索引

### [width] - 碰撞体积
```
[width] 40 10
```
- **功能**: 定义怪物的碰撞检测范围
- **参数**: X轴宽度 Y轴高度（像素）
- **用途**: 影响攻击判定和移动碰撞

### [floating height] - 浮空高度
```
[floating height] 0
```
- **功能**: 设置怪物是否浮空
- **参数**: 0=地面 1以上=浮空高度
- **影响**: 影响攻击判定和视觉效果

### [layer] - 显示层级
```
[layer] `[normal]`
```
- **功能**: 控制怪物的显示层级
- **选项**: `[close]` `[normal]` `[bottom]` `[closeback]` `[middleback]` `[distantback]`
- **用途**: 影响怪物与其他对象的显示顺序

### [category] - 怪物分类
```
[category]
`[undead]`
`[melee combat]`
[/category]
```
- **功能**: 定义怪物的种族和AI类型
- **种族**: `[human]` `[beast]` `[plant]` `[insect]` `[machine]` `[undead]` `[devil]` `[spirit]` `[dragon]`
- **AI类型**: `[melee combat]` `[range combat]` `[close-passive]` `[close-carefully]`
- **护甲**: `[human armor]` `[fort armor]` `[divine armor]`

---

## 📊 属性系统标签

### [level] - 等级范围
```
[level] 10 30
```
- **功能**: 定义怪物的最低和最高等级
- **参数**: 最低等级 最高等级
- **影响**: 影响所有属性的基础数值

### [HP MAX] - 生命值
```
[HP MAX] 1000 3000
```
- **功能**: 定义怪物的生命值范围
- **参数**: 最低等级HP 最高等级HP
- **计算**: 根据实际等级线性插值

### [MP MAX] - 魔法值
```
[MP MAX] 2000 3000
```
- **功能**: 定义怪物的魔法值范围
- **用途**: 影响技能释放和特殊能力

### [physical attack] - 物理攻击力
```
[physical attack] 100 120
```
- **功能**: 基础物理攻击力
- **影响**: 普通攻击和物理技能伤害

### [physical defense] - 物理防御力
```
[physical defense] 120 134
```
- **功能**: 物理伤害减免
- **计算**: 影响受到的物理伤害

### [magical attack] - 魔法攻击力
```
[magical attack] 110 129
```
- **功能**: 基础魔法攻击力
- **影响**: 魔法技能和元素攻击伤害

### [magical defense] - 魔法防御力
```
[magical defense] 130 180
```
- **功能**: 魔法伤害减免
- **计算**: 影响受到的魔法伤害

---

## 🛡️ 抗性系统标签

### 元素抗性
```
[fire resistance] 99 100      // 火抗性
[water resistance] 30 43      // 水抗性
[dark resistance] -20 -3      // 暗抗性
[light resistance] -30 -30    // 光抗性
```
- **功能**: 对各种元素伤害的抗性
- **数值**: 正数=抗性 负数=弱点 100=免疫
- **计算**: 影响对应元素伤害的减免

### 状态抗性
```
[slow resistance] 100 200     // 减速抗性
[freeze resistance]           // 冰冻抗性
[poison resistance]           // 中毒抗性
[stun resistance]             // 眩晕抗性
[curse resistance]            // 诅咒抗性
[blind resistance]            // 致盲抗性
[stone resistance]            // 石化抗性
[sleep resistance]            // 睡眠抗性
[bleeding resistance]         // 出血抗性
[stuck resistance]            // 僵直抗性
[confuse resistance]          // 混乱抗性
[hold resistance]             // 束缚抗性
```
- **功能**: 对各种异常状态的抗性
- **数值**: 0-100，数值越高抗性越强
- **效果**: 影响状态效果的持续时间和成功率

---

## ⚡ 速度属性标签

### [move speed] - 移动速度
```
[move speed] 1000 1200
```
- **功能**: 怪物的移动速度
- **单位**: 像素/秒
- **影响**: 追击和逃跑的速度

### [attack speed] - 攻击速度
```
[attack speed] 1020 1050
```
- **功能**: 攻击动作的播放速度
- **基准**: 1000 = 100%
- **计算**: 影响攻击动画的播放速度

### [cast speed] - 施法速度
```
[cast speed] 1000 1100
```
- **功能**: 技能施法的速度
- **基准**: 1000 = 100%
- **影响**: 技能释放的快慢

### [hit recovery] - 硬直恢复
```
[hit recovery] 1000 1000
```
- **功能**: 受击后的恢复速度
- **计算**: 影响受击硬直的持续时间

---

## 🧠 AI行为标签

### [sight] - 视野范围
```
[sight] 200
```
- **功能**: 怪物的视野检测范围
- **单位**: 像素
- **影响**: 发现敌人的距离

### [warlike] - 好战度
```
[warlike] 57
```
- **功能**: 怪物的攻击倾向
- **范围**: 0-100
- **影响**: 主动攻击的概率

### [attack delay] - 攻击间隔
```
[attack delay] 1000
```
- **功能**: 攻击之间的冷却时间
- **单位**: 毫秒
- **影响**: 攻击频率

### 目标选择标签
```
[targeting time term] 1000        // 目标锁定时间
[targeting on attack] 1           // 攻击时切换目标
[targeting on damage] 0           // 受伤时切换目标
[targeting high level] 0          // 优先高等级目标
[targeting low level] 1           // 优先低等级目标
[targeting high HP] 1             // 优先高血量目标
[targeting low HP] 0              // 优先低血量目标
[targeting nearest] 1             // 优先最近目标
[targeting attacker] 0            // 优先攻击者
[targeting from direction] 1      // 考虑方向因素
[targeting downed] 1              // 优先倒地目标
```
- **功能**: 控制怪物的目标选择逻辑
- **数值**: 0=关闭 1=开启
- **策略**: 可组合使用实现复杂的目标选择

---

## 🎬 动画系统标签

### 基础动作
```
[waiting motion] `BodyStay.ani`       // 待机动画
[move motion] `BodyMove.ani`          // 移动动画
[sit motion] `BodySit.ani`            // 坐下动画
[damage motion 1] `BodyDamage1.ani`   // 受伤动画1
[damage motion 2] `BodyDamage2.ani`   // 受伤动画2
[down motion] `BodyDown.ani`          // 倒地动画
[overturn motion] `BodyOverturn.ani`  // 翻身动画
[jump motion] `BodyJump.ani`          // 跳跃动画
```
- **功能**: 定义怪物的基础动作动画
- **格式**: 动画文件路径，用反引号包围
- **要求**: 确保动画文件存在且格式正确

### 攻击动作
```
[attack motion]
`Attack1.ani`
`Attack2.ani`
[/attack motion]
```
- **功能**: 定义攻击动画列表
- **格式**: 多个动画文件，随机或按顺序播放
- **配对**: 需要对应的攻击信息文件

### 特殊动作
```
[etc motion]
`Magic.ani`
`PowerUp.ani`
[/etc motion]
```
- **功能**: 定义特殊技能动画
- **用途**: 魔法、变身、召唤等特殊动作
- **扩展**: 可配合脚本实现复杂效果

---

## ⚔️ 攻击系统标签

### [attack kind] - 攻击类型
```
[attack kind]
30  5   1   1 400 20 20 0    // 基础攻击
30  5   0   1 400 100 100 0  // 3连击攻击
[/attack kind]
```
- **参数说明**:
  - 参数1: 攻击力系数
  - 参数2: 攻击范围
  - 参数3: 攻击类型（0=普通 1=特殊）
  - 参数4: 连击数
  - 其他: 特殊效果参数

### [attack info] - 攻击信息
```
[attack info]
`Attack1.atk`
`Attack2.atk`
[/attack info]
```
- **功能**: 引用攻击信息文件
- **内容**: 详细的攻击判定和效果
- **配对**: 与攻击动画一一对应

### [jumpattack info] - 跳跃攻击
```
[jumpattack info] `JumpAttack.atk`
```
- **功能**: 跳跃攻击的信息文件
- **特点**: 包含跳跃轨迹和攻击判定
- **用途**: 实现空中攻击效果

---

## 🎒 装备系统标签

### [equipment] - 装备列表
```
[equipment]
5                               // 装备数量
`Monster/Goblin/acc4-2.equ`     // 饰品
`Monster/Goblin/Hcc2-2.equ`     // 头部
`Monster/Goblin/gcc1-3.equ`     // 手套
`Monster/Goblin/tcc1-2.equ`     // 上衣
`Monster/Goblin/bcc1-2.equ`     // 下装
[/equipment]
```
- **功能**: 定义怪物的外观装备
- **格式**: 装备文件路径列表
- **影响**: 改变怪物的外观和属性

### [item] - 掉落物品
```
[item]
1 6     // 物品ID 掉落概率
27 13   // 物品ID 掉落概率
[/item]
```
- **功能**: 定义怪物死亡时的掉落物品
- **参数**: 物品ID 掉落概率（百分比）
- **计算**: 每个物品独立计算掉落概率

---

## 🎭 特殊效果标签

### [die effect] - 死亡效果
```
[die effect] 0 3 2
```
- **参数说明**:
  - 参数1: 效果类型（0=标准效果）
  - 参数2: 效果编号
  - 参数3: 效果组合（位运算）
    - 1: 血液效果
    - 2: 尸体效果
    - 4: 烟雾效果
    - 8: 爆炸效果

### [face image] - 头像图片
```
[face image] `MonsterFace.img` 0
```
- **功能**: 定义怪物的头像图片
- **参数**: 图片文件 图片索引
- **用途**: 在UI中显示怪物头像

### [speech on situation] - 情境对话
```
[speech on situation]
`[on attack]` `接受攻击！这是第0次攻击！！` 0
`[on damage]` `受到伤害！！！` 0
`[on die]` `啊啊啊~` 0
[/speech on situation]
```
- **功能**: 定义怪物在特定情况下的对话
- **情境**: `[on attack]` `[on damage]` `[on die]` `[on revenge]`
- **格式**: 情境 对话内容 概率

---

## 🔧 高级功能标签

### [ability category] - 能力加成
```
[ability category]
`[ATTACK_SPEED]` `+` 10
`[MOVE_SPEED]` `*` 1.2
[/ability category]
```
- **功能**: 定义怪物的特殊能力加成
- **操作**: `+` 加法 `*` 乘法
- **属性**: 各种基础属性的修正

### [counter attack] - 反击系统
```
[counter attack]
1                           // 反击开关
`[probability]` 90          // 反击概率
`[attack index]` 2          // 反击攻击索引
`[damage type]` `[approach attack]`  // 触发条件
[/counter attack]
```
- **功能**: 定义怪物的反击机制
- **条件**: `[approach attack]` `[range attack]` `[all attack]`
- **效果**: 在特定条件下自动反击

### [throw attack] - 投掷攻击
```
[throw attack]
`[attack index]` 0
`[passive object number]` 1
`[passive object filename]` `Particle/ThrowStone.ptl`
`[object type]` 1
`[power]` 0
`[throw frame]` 2
[/throw attack]
```
- **功能**: 定义投掷类攻击
- **对象**: 可投掷粒子效果或被动对象
- **参数**: 投掷力度、时机、轨迹等

---

## 📝 使用注意事项

### 格式规范
1. **字符串格式**: 必须使用反引号 \`\` 包围，不能使用双引号
2. **缩进规范**: 使用Tab键缩进，不能使用空格
3. **标签配对**: 所有开始标签必须有对应的结束标签
4. **注释格式**: 使用 // 进行行注释

### 数值平衡
1. **属性范围**: 确保属性值在合理范围内
2. **等级差异**: 最低和最高等级的属性差异要合理
3. **抗性设置**: 避免过高的抗性导致免疫所有伤害
4. **速度平衡**: 移动和攻击速度要符合游戏平衡

### 文件依赖
1. **动画文件**: 确保所有引用的.ani文件存在
2. **攻击文件**: 确保所有引用的.atk文件存在
3. **装备文件**: 确保所有引用的.equ文件存在
4. **图片文件**: 确保所有引用的图片文件存在

### 性能优化
1. **AI复杂度**: 避免过于复杂的AI逻辑
2. **动画优化**: 控制动画文件大小和帧数
3. **效果控制**: 合理使用特殊效果，避免性能问题
4. **内存管理**: 避免同时加载过多资源

---

*本参考文档涵盖了MOB文件的所有主要标签，为AI学习和实际开发提供完整的技术支持。*